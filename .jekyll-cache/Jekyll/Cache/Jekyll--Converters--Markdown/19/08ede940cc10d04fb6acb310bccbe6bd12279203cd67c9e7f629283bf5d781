I"(<p><img src="https://raw.githubusercontent.com/formoon/formoon.github.io/master/attachments/201712/angular.jpeg" alt="" />
Angular2ä»¥åå·²ç»éå¸¸å……åˆ†çš„é¢å‘å¯¹è±¡åŒ–ï¼Œæ‰€ä»¥å¾ˆå¤šåŸæ¥åœ¨javascriptä¸­ç§¯ç´¯çš„æŠ€å·§ï¼Œéƒ½éœ€è¦åšå‡ºç›¸åº”çš„è°ƒæ•´ã€‚<br />
æ£€æµ‹å½“å‰æµè§ˆå™¨ç±»å‹ã€ç‰ˆæœ¬åŠè®¾å¤‡ç±»å‹ï¼Œæ¨èä½¿ç”¨ï¼š<a href="https://github.com/KoderLabs/ng2-device-detector">https://github.com/KoderLabs/ng2-device-detector</a>ã€‚githubé¡µé¢çš„ä»‹ç»å·²ç»å†™çš„å¾ˆè¯¦ç»†ï¼Œè¯·ç›´æ¥é˜…è¯»åŸæ–‡æ–‡æ¡£ã€‚è¿™é‡Œåªè®²å‡ ä¸ªé‡ç‚¹ï¼š</p>

<p>1.å½“å‰çš„AngularJSç‰ˆæœ¬å·²ç»æ˜¯5ï¼Œå·²ç»æœ‰äººå¯¹ä¸Šé¢çš„æ¨¡å—åšäº†ä¼˜åŒ–ï¼Œæ›´åä¸ºng4-device-detector,æ‰€ä»¥å®‰è£…è¿‡ç¨‹åº”å½“æ˜¯ï¼š</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">cnpm <span class="nb">install </span>ng4-device-detector <span class="nt">--save</span></code></pre></figure>

<p>ä½¿ç”¨cnpmå®‰è£…è€Œä¸æ˜¯åŸæ¥çš„npmï¼ŒåŸå› æ˜¯å¦‚æœä½ åœ¨å›½å†…ï¼Œå› ä¸ºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œä¸‹è½½å›½å¤–çš„åŒ…èµ„æºå¯èƒ½ä¼šå¾ˆæ…¢å¹¶ä¸”æœ‰è¢«å°æ‰çš„å¯èƒ½ï¼Œcnpmæ˜¯ä½¿ç”¨é˜¿é‡Œçš„é•œåƒç«™ä¸‹è½½ï¼Œé€Ÿåº¦ä¼šå¿«å¾ˆå¤šã€‚</p>

<p>2.å› ä¸ºå˜æ›´äº†æ§ä»¶åŒ…ï¼ŒåŸæœ‰çš„app.module.tsåº”å½“å˜æ›´ä¸ºï¼š</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">  <span class="k">import</span> <span class="p">{</span> <span class="nx">NgModule</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">Ng4DeviceDetectorModule</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">ng4-device-detector</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">...</span>
  <span class="p">@</span><span class="nd">NgModule</span><span class="p">({</span>
    <span class="na">declarations</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">...</span>
      <span class="nx">LoginComponent</span><span class="p">,</span>
      <span class="nx">SignupComponent</span>
      <span class="p">...</span>
    <span class="p">],</span>
    <span class="na">imports</span><span class="p">:</span> <span class="p">[</span>
      <span class="nx">CommonModule</span><span class="p">,</span>
      <span class="nx">FormsModule</span><span class="p">,</span>
      <span class="nx">Ng4DeviceDetectorModule</span><span class="p">.</span><span class="nx">forRoot</span><span class="p">()</span>
    <span class="p">],</span>
    <span class="na">providers</span><span class="p">:[</span>
      <span class="nx">AuthService</span>
    <span class="p">]</span>
    <span class="p">...</span>
  <span class="p">})</span></code></pre></figure>

<p>çœ‹å‡ºæ¥äº†å§ï¼Œæ‰€æœ‰ng2éƒ½å˜æˆng4,æ²¡å•¥éš¾ä»¥ç†è§£çš„ï¼Œå…¶å®ƒçš„æºç éƒ¨åˆ†ä¹Ÿè¦åšç±»ä¼¼çš„ä¿®æ”¹ï¼Œå°±ä¸è¯¦ç»†è¯´äº†ã€‚</p>

<p>3.ng4-device-detectorçš„å°å‘<br />
æ¨¡å—æä¾›äº†ä»¥ä¸‹å‡ ä¸ªå±æ€§ç”¨äºåˆ¤æ–­å½“å‰æµè§ˆå™¨ç±»å‹ï¼š</p>
<ul>
  <li>browser</li>
  <li>os</li>
  <li>device</li>
  <li>userAgent</li>
  <li>os_version</li>
</ul>

<p>è¿™é‡Œé¢æœ‰ä¸ªå°bug,æ¯”å¦‚oså±æ€§ï¼Œå¦‚æœä½¿ç”¨æ‰‹æœºæµè§ˆï¼Œæ­£å¸¸åº”å½“è¿”å›<code class="language-plaintext highlighter-rouge">android</code>æˆ–è€…<code class="language-plaintext highlighter-rouge">iphone</code>,ä½†æˆ‘ç”¨iPhoneæµ‹è¯•çš„æ—¶å€™ï¼Œå±…ç„¶ä¹Ÿè¿”å›<code class="language-plaintext highlighter-rouge">mac</code>ï¼Œå¥½åœ¨deviceå±æ€§æ­£å¸¸è¿”å›äº†<code class="language-plaintext highlighter-rouge">iphone</code>ã€‚æ¢ç”¨Macè®¿é—®çš„æ—¶å€™ï¼Œosè¿”å›ä»ç„¶æ˜¯<code class="language-plaintext highlighter-rouge">mac</code>,deviceè¿”å›æ˜¯<code class="language-plaintext highlighter-rouge">unknow</code>ã€‚æ‰€ä»¥å»ºè®®ä½¿ç”¨å¦‚ä¸‹ä»£ç æ¥åˆ¤æ–­è®¾å¤‡ç±»å‹ï¼š</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">	<span class="p">...</span>
  <span class="nx">isMobile</span><span class="o">=</span><span class="kc">false</span><span class="p">;</span>
	<span class="p">...</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="kr">private</span> <span class="nx">deviceService</span><span class="p">:</span> <span class="nx">Ng4DeviceService</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">deviceInfo</span><span class="p">.</span><span class="nx">device</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">android</span><span class="dl">'</span> <span class="o">||</span> 
        <span class="k">this</span><span class="p">.</span><span class="nx">deviceInfo</span><span class="p">.</span><span class="nx">device</span><span class="o">==</span><span class="dl">'</span><span class="s1">iphone</span><span class="dl">'</span> <span class="o">||</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">deviceInfo</span><span class="p">.</span><span class="nx">device</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">ipad</span><span class="dl">'</span> <span class="p">){</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">isMobile</span><span class="o">=</span><span class="kc">true</span><span class="p">;</span>
    <span class="p">};</span>
	<span class="p">...</span></code></pre></figure>

<p>å¾—åˆ°äº†isMobileçš„å€¼ï¼Œé¡µé¢ä¸­å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªå€¼æ¥å¯¹åº”ä¸åŒç‰ˆæœ¬çš„é¡µé¢äº†ï¼š</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;SourcePage</span> <span class="na">*ngIf=</span><span class="s">"!isMobile"</span><span class="nt">&gt;&lt;/SourcePage&gt;</span>
<span class="nt">&lt;SourcePageMobile</span> <span class="na">*ngIf=</span><span class="s">"isMobile"</span><span class="nt">&gt;&lt;/SourcePageMobile&gt;</span></code></pre></figure>

<p>4.ng4-device-detectorçš„å¤§å‘<br />
éƒ½çŸ¥é“æ­£å¸¸çš„ng4é¡¹ç›®ç¼–è¯‘ï¼Œæ˜¯ä½¿ç”¨<code class="language-plaintext highlighter-rouge">ng build</code>å‘½ä»¤ã€‚<br />
è¿™æ ·äº§ç”Ÿçš„ç›®æ ‡æ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥å¦‚æœæ˜¯ä¸ºäº†æœåŠ¡å™¨ç”Ÿäº§éƒ¨ç½²ï¼Œåº”å½“æ˜¯ç”¨<code class="language-plaintext highlighter-rouge">ng build -prod</code>,è¿™æ ·äº§ç”Ÿçš„æ–‡ä»¶ï¼Œå¤§çº¦åªæœ‰å¹³å¸¸çš„1/6å®¹é‡ï¼Œé€Ÿåº¦ä¹Ÿä¼šå¿«å¾ˆå¤šã€‚<br />
ä½†æ˜¯å¼•å…¥äº†ng4-device-detectoræˆ–è€…ng2-device-detectorï¼Œä½¿ç”¨<code class="language-plaintext highlighter-rouge">ng build -prod</code>ä¼šæŠ¥é”™ï¼Œï¼ˆä½¿ç”¨<code class="language-plaintext highlighter-rouge">ng build</code>åŠ<code class="language-plaintext highlighter-rouge">ng server</code>è°ƒè¯•æ²¡æœ‰é—®é¢˜ï¼‰,é”™è¯¯ä¿¡æ¯ä¸ºï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ERROR in Error encountered resolving symbol values statically. Calling function 'ÉµmakeDecorator', function calls are not supported. Consider replacing the function or lambda with a reference to an exported function, resolving symbol Injectable in /Users/andrew/dev/html/angular/educast-local/node_modules/ng4-device-detector/node_modules/@angular/core/core.d.ts, resolving symbol Éµe in /Users/andrew/dev/html/angular/educast-local/node_modules/ng4-device-detector/node_modules/@angular/core/core.d.ts, resolving symbol Éµe in /Users/andrew/dev/html/angular/educast-local/node_modules/ng4-device-detector/node_modules/@angular/core/core.d.ts

ERROR in ./src/main.ts
Module not found: Error: Can't resolve './$$_gendir/app/app.module.ngfactory' in '/Users/andrew/dev/html/angular/educast-local/src'
 @ ./src/main.ts 4:0-74
 @ multi ./src/main.ts
</code></pre></div></div>
<p>ä¸»è¦æ˜¯æ–°ç³»ç»Ÿå¯¹äºlambdaå‡½æ•°çš„ä½¿ç”¨é™åˆ¶é€ æˆçš„ï¼Œä¹Ÿæœ‰è¯´æ˜¯angular5çš„bug,è™½ç„¶ä¿®æ”¹ä»£ç å¯ä»¥è§£å†³é—®é¢˜ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥å…³é—­ç¼–è¯‘å™¨çš„aotå±æ€§æ¥å®Œæˆç¼–è¯‘ï¼š</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html">ng build -prod --aot false</code></pre></figure>

<p>è¿™æ ·å¯ä»¥é¡ºåˆ©å®Œæˆç¼–è¯‘ï¼Œå¹¶ä¸”æµ‹è¯•æ²¡æœ‰é—®é¢˜ã€‚</p>

<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>

<p>æ¥ç€æ˜¯æ†ç»‘çƒ­é”®çš„æ–¹æ³•ï¼Œè¿™ä¸ªä¹Ÿæœ‰ç¬¬ä¸‰æ–¹çš„æ¨¡å—å¯ä»¥ç”¨ï¼Œæ¯”å¦‚<a href="https://www.npmjs.com/package/angular2-hotkeys">angular2-hotkeys</a>,å¯ä»¥å»å®˜æ–¹é¡µé¢çœ‹çœ‹ä»‹ç»ã€‚<br />
è¿™é‡Œä»‹ç»ä¸€ä¸ªæ²¿ç”¨åŸæ¥javascriptçš„çŸ¥è¯†ï¼Œè‡ªå·±å†™ä¸€éƒ¨åˆ†ä»£ç æ¥å®ç°çš„æ–¹å¼ï¼š</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span><span class="nx">ViewChild</span>  <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@angular/core</span><span class="dl">'</span><span class="p">;</span>
	<span class="p">...</span>
<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="dl">'</span><span class="s1">SourcePage</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">host</span><span class="p">:</span> <span class="p">{</span><span class="dl">'</span><span class="s1">(window:keydown)</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">hotkeys($event)</span><span class="dl">'</span><span class="p">},</span>
	<span class="p">...</span>


  <span class="nx">hotkeys</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="mi">13</span><span class="p">){</span>  <span class="c1">//ENTER</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">ENTER pressed</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
	</code></pre></figure>

<p>ä»£ç åº”å½“æ²¡æœ‰å•¥å¥½è§£é‡Šçš„å§ï¼Œç”¨èµ·æ¥ä¹Ÿä¸é”™ï¼Œæ•ˆç‡é«˜ï¼Œè¿˜çœäº†é¢å¤–çš„é™„åŠ åŒ…ã€‚</p>

:ET