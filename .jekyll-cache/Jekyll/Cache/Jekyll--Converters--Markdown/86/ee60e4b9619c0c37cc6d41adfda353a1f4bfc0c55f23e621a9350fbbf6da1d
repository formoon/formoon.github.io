I"D·<p><img src="/attachments/201910/titlepic/NMF.jpg" alt="" />
NMFæ˜¯å¾ˆä¹…ä»¥å‰å­¦çš„ï¼ŒåŸºæœ¬å¿«å¿˜æ²¡äº†ï¼Œæ˜¨å¤©YXæå‡ºæ¥ä¸€ä¸ªå…³äºNMF(åŒéŸ³åŒå­—ä¸åŒä¹‰)çš„é—®é¢˜ï¼Œæ‰åˆæƒ³èµ·æ¥ã€‚<br />
è‡ªå·±çš„å­¦ä¹ ç¬”è®°å†™çš„æ¯”è¾ƒä¹±ï¼Œå¥½åœ¨ç½‘ä¸Šèµ„æ–™å¤šï¼Œæ‘˜äº†ä¸€ç¯‡ï¼Œè¡¥å……ä¸Šè‡ªå·±ç¬”è®°çš„å†…å®¹ï¼Œç•™æ­¤åŠ©è®°ã€‚</p>

<p>NMFæ¦‚å¿µå‡ºç°çš„æ¯”è¾ƒæ—©ï¼Œå·®ä¸å¤šåœ¨ç”µè„‘è¿˜æ²¡æœ‰å¼€å§‹ç¹è£èµ·æ¥ï¼ŒNMFåŠç›¸å…³çš„ä¸€äº›ç®—æ³•å·²ç»å¾ˆæˆç†Ÿäº†ã€‚NMFç”¨åœ¨ç”µå½±æ¨èã€å•†å“æ¨èä¹Ÿå¹¶ä¸æ˜¯å¾ˆé€‚åˆï¼Œç°åœ¨å¤§å¤šä½¿ç”¨SVDä¹‹ç±»çš„ç®—æ³•ã€‚ä¸è¿‡è¿™ç¯‡åªæ˜¯å­¦ä¹ çš„è®°å½•ï¼Œæœ‰ä¸ªä¾‹å­æ€»æ¯”æ¯ç‡¥çš„å•ƒæ¦‚å¿µå¥½çš„å¤šã€‚</p>

<h4 id="åœºæ™¯">åœºæ™¯</h4>
<p>è®©æˆ‘ä»¬å‡è®¾ä¸€ä¸ªåœºæ™¯ã€‚<br />
ç›¸åƒå½“å‰è¿™ä¸ªæ¡£æœŸï¼Œæœ‰10éƒ¨ç”µå½±æ­£åœ¨ä¸Šæ˜ ï¼Œæˆ‘ä»¬æŠŠå®ƒä»¬æ”¾åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">item</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">'å¸Œç‰¹å‹’å›æ¥äº†'</span><span class="p">,</span> <span class="s">'æ­»ä¾'</span><span class="p">,</span> <span class="s">'æˆ¿é—´'</span><span class="p">,</span> <span class="s">'é¾™è™¾'</span><span class="p">,</span> <span class="s">'å¤§ç©ºå¤´'</span><span class="p">,</span>
    <span class="s">'æç›—è€…'</span><span class="p">,</span> <span class="s">'è£ç¼'</span><span class="p">,</span> <span class="s">'å…«æ¶äºº'</span><span class="p">,</span> <span class="s">'å®ä¹ ç”Ÿ'</span><span class="p">,</span> <span class="s">'é—´è°ä¹‹æ¡¥'</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div></div>
<p>æ”¾å…¥æ•°ç»„è¿™ä¸ªåŠ¨ä½œï¼Œç­‰äºä¹ŸæŠŠè¿™äº›ç”µå½±ç¼–äº†å·ï¼Œä»0åˆ°9ï¼Œæ¯”å¦‚ç”µå½±ã€Šå®ä¹ ç”Ÿã€‹ï¼Œç¼–å·å°±æ˜¯8ã€‚<br />
éšåæˆ‘ä»¬ç»§ç»­å‡è®¾æˆ‘ä»¬å½±é™¢æœ‰15ä¸ªè€é¡¾å®¢ï¼ŒåŒæ ·æŠŠå®ƒä»¬æ”¾ç½®åˆ°ä¸€ä¸ªæ•°ç»„ï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">user</span> <span class="o">=</span> <span class="p">[</span><span class="s">'äº”æŸ³å›'</span><span class="p">,</span> <span class="s">'å¸•æ ¼å°¼å…­'</span><span class="p">,</span> <span class="s">'æœ¨æ‘é™é¦™'</span><span class="p">,</span> <span class="s">'WTF'</span><span class="p">,</span> <span class="s">'airyyouth'</span><span class="p">,</span>
        <span class="s">'æ©™å­c'</span><span class="p">,</span> <span class="s">'ç§‹æœˆç™½'</span><span class="p">,</span> <span class="s">'clavin_kong'</span><span class="p">,</span> <span class="s">'olit'</span><span class="p">,</span> <span class="s">'You_æŸäºº'</span><span class="p">,</span>
        <span class="s">'å‡›å†¬å°†è‡³'</span><span class="p">,</span> <span class="s">'Rusty'</span><span class="p">,</span> <span class="s">'å™¢ï¼ä½ çœ‹ï¼'</span><span class="p">,</span> <span class="s">'Aron'</span><span class="p">,</span> <span class="s">'ErDong Chen'</span><span class="p">]</span>
</code></pre></div></div>
<p>ä»–ä»¬çš„ç¼–å·æ˜¯0-14ã€‚<br />
æ¥ç€ä»ç”¨æˆ·çš„è§‚å½±è®°å½•ä¸­ï¼Œæˆ‘ä»¬æå–æ¯ä¸ªç”¨æˆ·ï¼Œå¯¹æ¯éƒ¨ç”µå½±çš„æ‰“åˆ†è®°å½•ã€‚ä»¥ç”µå½±åºå·ä¸ºè¡Œå·ï¼Œä»¥ç”¨æˆ·ç¼–å·ä¸ºåˆ—å·ï¼Œå½¢æˆä¸€ä¸ªçŸ©é˜µï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">RATE_MATRIX</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">(</span>
    <span class="p">[[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
     <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
     <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
     <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
     <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
     <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
     <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
     <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
     <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
     <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
<span class="p">)</span>
</code></pre></div></div>
<p>ä»çŸ©é˜µä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°è¿™æ ·å‡ ä¸ªä¿¡æ¯ï¼š</p>
<ol>
  <li>è¯„åˆ†æ˜¯5åˆ†åˆ¶ã€‚</li>
  <li>ç”¨æˆ·æ‰“åˆ†æ˜¯æœ‰ä¸ªäººç‰¹ç‚¹çš„ï¼Œæ¯”å¦‚ç¬¬ä¸€åˆ—çš„ç”¨æˆ·ï¼Œä¹Ÿå°±æ˜¯â€œäº”æŸ³å›â€ï¼Œå–œæ¬¢ç»™ç”µå½±æ‰“5åˆ†ï¼Œ:),çœŸæ˜¯ä¸ªå¿ƒå®½çš„å®¶ä¼™ã€‚</li>
  <li>ç”¨æˆ·æ²¡æœ‰æ‰“åˆ†çš„ç”µå½±ï¼Œç»™åˆ†å°±æ˜¯0ã€‚ï¼ˆé€šå¸¸ä¸ä¼šå‡ºç°çœŸçš„ç»™æŸéƒ¨ç”µå½±æ‰“0åˆ†çš„æƒ…å†µï¼‰ã€‚</li>
</ol>

<h4 id="åˆ†ç±»">åˆ†ç±»</h4>
<p>æˆ‘ä»¬ä½¿ç”¨NMFä¸ºç”µå½±è¿›è¡Œä¸»é¢˜åˆ†ç±»ã€‚<br />
è¿™æ˜¯ä¸€ä¸ªéå¸¸å…¸å‹çš„éç›‘ç£å­¦ä¹ æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¹¶ä¸æŒ‡å®šä¸»é¢˜æ˜¯ä»€ä¹ˆï¼ŒåªçŸ¥é“ä¸»é¢˜ä¸€å®šæ˜¯å­˜åœ¨çš„ï¼Œå› æ­¤ä¸€å®šä¼šæœ‰ä¸¤ä¸ªå…¸å‹çš„å€¾å‘ï¼š</p>
<ol>
  <li>ä»»ä½•ä¸€éƒ¨ç”µå½±ï¼Œå¿…ç„¶å€¾å‘æŸä¸€ç§æˆ–è€…å‡ ç§ä¸»é¢˜ã€‚</li>
  <li>ä»»æ„ä¸€ä½è§‚ä¼—ï¼Œå¿…ç„¶å–œçˆ±æŸä¸€ç§æˆ–è€…å‡ ç§ä¸»é¢˜ã€‚</li>
</ol>

<p>è¿™é‡Œçš„ç†è§£é‡ç‚¹æ˜¯åœ¨éç›‘ç£å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸æŒ‡å®šä¸»é¢˜æ˜¯ä»€ä¹ˆï¼Œä½†åªè¦ä½ è”æƒ³ä¸€ä¸‹å®é™…æƒ…å†µå°±å®¹æ˜“ç†è§£äº†ï¼Œæ¯”å¦‚å¯èƒ½æ˜¯â€œçˆ±æƒ…â€ä¸»é¢˜ï¼Œæˆ–è€…â€œæªæˆ˜â€ä¸»é¢˜ã€‚<br />
ä¸‹é¢ä»£ç å°†ä½¿ç”¨NMFè®¾å®š2ä¸ªå…³æ³¨ä¸»é¢˜ï¼Œå¹¶é€šè¿‡åˆ†ç±»ï¼Œå°†ç”µå½±åˆ†ç±»ä¸ºå€¾å‘ä¸»é¢˜1æˆ–è€…ä¸»é¢˜2çš„ä¸¤ç±»ã€‚åŒæ—¶å°†ç”¨æˆ·åˆ†ä¸ºå–œçˆ±ä¸»é¢˜1æˆ–è€…å–œçˆ±ä¸»é¢˜2ä¸¤ä¸ªåˆ†ç±»ã€‚</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">nmf_model</span> <span class="o">=</span> <span class="n">NMF</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># è®¾æœ‰2ä¸ªä¸»é¢˜
</span><span class="n">item_dis</span> <span class="o">=</span> <span class="n">nmf_model</span><span class="p">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">RATE_MATRIX</span><span class="p">)</span>
<span class="n">user_dis</span> <span class="o">=</span> <span class="n">nmf_model</span><span class="p">.</span><span class="n">components_</span>

<span class="k">print</span><span class="p">(</span><span class="s">'ç”¨æˆ·çš„ä¸»é¢˜åˆ†å¸ƒï¼š'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">user_dis</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'ç”µå½±çš„ä¸»é¢˜åˆ†å¸ƒï¼š'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">item_dis</span><span class="p">)</span>
</code></pre></div></div>
<p>ä½¿ç”¨ä¸Šé¢çš„æ•°æ®é›†ï¼Œä¼šå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ç”¨æˆ·çš„ä¸»é¢˜åˆ†å¸ƒ</span><span class="err">ï¼š</span>
<span class="p">[[</span><span class="mf">0.81240799</span> <span class="mf">0.71153396</span> <span class="mf">0.47062388</span> <span class="mf">0.43807017</span> <span class="mf">1.39456425</span> <span class="mf">2.24323719</span>
  <span class="mf">1.02417204</span> <span class="mf">1.25356481</span> <span class="mf">1.10517661</span> <span class="mf">1.47624595</span> <span class="mf">1.84626347</span> <span class="mf">0.97437242</span>
  <span class="mf">1.14921406</span> <span class="mf">0.8159644</span>  <span class="mf">1.14200028</span><span class="p">]</span>
 <span class="p">[</span><span class="mf">2.23910382</span> <span class="mf">1.70186882</span> <span class="mf">1.34300272</span> <span class="mf">1.09192602</span> <span class="mf">0.68045441</span> <span class="mf">0.</span>
  <span class="mf">0.0542231</span>  <span class="mf">0.</span>         <span class="mf">0.</span>         <span class="mf">0.</span>         <span class="mf">0.04426552</span> <span class="mf">0.12260418</span>
  <span class="mf">0.34109613</span> <span class="mf">0.51642843</span> <span class="mf">0.6157604</span> <span class="p">]]</span>
<span class="n">ç”µå½±çš„ä¸»é¢˜åˆ†å¸ƒ</span><span class="err">ï¼š</span>
<span class="p">[[</span><span class="mf">2.20401687</span> <span class="mf">1.53852775</span><span class="p">]</span>
 <span class="p">[</span><span class="mf">1.9083879</span>  <span class="mf">0.83214869</span><span class="p">]</span>
 <span class="p">[</span><span class="mf">1.95596132</span> <span class="mf">0.</span>        <span class="p">]</span>
 <span class="p">[</span><span class="mf">1.87637018</span> <span class="mf">1.65573674</span><span class="p">]</span>
 <span class="p">[</span><span class="mf">2.48959328</span> <span class="mf">1.41632377</span><span class="p">]</span>
 <span class="p">[</span><span class="mf">2.38108536</span> <span class="mf">1.08460665</span><span class="p">]</span>
 <span class="p">[</span><span class="mf">0.</span>         <span class="mf">2.29342959</span><span class="p">]</span>
 <span class="p">[</span><span class="mf">0.</span>         <span class="mf">2.27353353</span><span class="p">]</span>
 <span class="p">[</span><span class="mf">0.</span>         <span class="mf">2.32513876</span><span class="p">]</span>
 <span class="p">[</span><span class="mf">0.</span>         <span class="mf">2.23196277</span><span class="p">]]</span>
</code></pre></div></div>
<p>è¿™äº›æ•°æ®éå¸¸ä¸åˆ©äºè§‚å¯Ÿç†è§£ã€‚å®ƒä»¬ä»£è¡¨çš„æ¦‚å¿µæ˜¯ï¼Œæ¯”è¾ƒæ¥è¿‘çš„å€¼ï¼Œä»£è¡¨è¯¥å½±ç‰‡æˆ–è€…è¯¥è§‚ä¼—å±äºï¼ˆæˆ–è¯´å–œçˆ±ï¼‰æ¯”è¾ƒæ¥è¿‘çš„ä¸»é¢˜ã€‚</p>

<h4 id="æ•°æ®å¯è§†åŒ–">æ•°æ®å¯è§†åŒ–</h4>
<p>ä¸ºäº†è§‚å¯Ÿèµ·æ¥æ›´ç›´è§‚ï¼Œå¯ä»¥ä½¿ç”¨ç»˜å›¾çš„ä»£ç æŠŠæ•°æ®æ˜¾ç¤ºå‡ºæ¥ï¼Œä»è€Œæ›´å½¢è±¡çš„ç†è§£â€œèšç±»â€ã€‚</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">#æ˜¾ç¤ºç”µå½±çš„åæ ‡åˆ†å¸ƒ
</span><span class="n">plt1</span> <span class="o">=</span> <span class="n">plt</span>
<span class="n">plt1</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">item_dis</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">item_dis</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="s">'ro'</span><span class="p">)</span>
<span class="n">plt1</span><span class="p">.</span><span class="n">draw</span><span class="p">()</span><span class="c1">#ç›´æ¥ç”»å‡ºçŸ©é˜µï¼Œåªæ‰“äº†ç‚¹ï¼Œä¸‹é¢å¯¹å›¾plt1è¿›è¡Œä¸€äº›è®¾ç½®
</span>
<span class="n">plt1</span><span class="p">.</span><span class="n">xlim</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">plt1</span><span class="p">.</span><span class="n">ylim</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">plt1</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="sa">u</span><span class="s">'the distribution of items (NMF)'</span><span class="p">)</span><span class="c1">#è®¾ç½®å›¾çš„æ ‡é¢˜
</span>
<span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">zipitem</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">item_dis</span><span class="p">)</span><span class="c1">#æŠŠç”µå½±æ ‡é¢˜å’Œç”µå½±çš„åæ ‡è”ç³»åœ¨ä¸€èµ·
</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">zipitem</span><span class="p">:</span>
    <span class="n">item_name</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">plt1</span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">item_name</span><span class="p">,</span>
              <span class="n">fontproperties</span><span class="o">=</span><span class="n">fontP</span><span class="p">,</span> 
              <span class="n">horizontalalignment</span><span class="o">=</span><span class="s">'center'</span><span class="p">,</span>
              <span class="n">verticalalignment</span><span class="o">=</span><span class="s">'top'</span><span class="p">)</span>
<span class="n">plt1</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>

 <span class="c1">#æ˜¾ç¤ºç”¨æˆ·çš„åæ ‡åˆ†å¸ƒ
</span><span class="n">user_dis</span> <span class="o">=</span> <span class="n">user_dis</span><span class="p">.</span><span class="n">T</span> <span class="c1">#æŠŠè½¬ç½®ç”¨æˆ·åˆ†å¸ƒçŸ©é˜µ
</span><span class="n">plt2</span> <span class="o">=</span> <span class="n">plt</span>
<span class="n">plt2</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">user_dis</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">user_dis</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="s">'ro'</span><span class="p">)</span>
<span class="n">plt2</span><span class="p">.</span><span class="n">xlim</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">plt2</span><span class="p">.</span><span class="n">ylim</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">plt2</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="sa">u</span><span class="s">'the distribution of user (NMF)'</span><span class="p">)</span><span class="c1">#è®¾ç½®å›¾çš„æ ‡é¢˜
</span>
<span class="n">zipuser</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">user_dis</span><span class="p">)</span><span class="c1">#æŠŠç”µå½±æ ‡é¢˜å’Œç”µå½±çš„åæ ‡è”ç³»åœ¨ä¸€èµ·
</span><span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">zipuser</span><span class="p">:</span>
    <span class="n">user_name</span> <span class="o">=</span> <span class="n">user</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">user</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">plt2</span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">user_name</span><span class="p">,</span>
              <span class="n">fontproperties</span><span class="o">=</span><span class="n">fontP</span><span class="p">,</span> 
              <span class="n">horizontalalignment</span><span class="o">=</span><span class="s">'center'</span><span class="p">,</span>
              <span class="n">verticalalignment</span><span class="o">=</span><span class="s">'top'</span><span class="p">)</span>
<span class="n">plt2</span><span class="p">.</span><span class="n">show</span><span class="p">()</span><span class="c1">#ç›´æ¥ç”»å‡ºçŸ©é˜µï¼Œåªæ‰“äº†ç‚¹ï¼Œä¸‹é¢å¯¹å›¾plt1è¿›è¡Œä¸€äº›è®¾ç½®
</span></code></pre></div></div>
<p>ä»¥ä¸Šä»£ç ä¼šå¾—åˆ°ä¸¤å¼ å›¾ï¼Œç”µå½±ä¸»é¢˜åˆ†å¸ƒï¼š<br />
<img src="/attachments/201804/25/files-distribution.png" alt="" />
ç”¨æˆ·å€¾å‘ä¸»é¢˜åˆ†å¸ƒï¼š<br />
<img src="/attachments/201804/25/user_distribution.png" alt="" />
ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åˆ†ç±»æ¯”è¾ƒå°‘ï¼Œæ•°æ®ä¹Ÿä¸æ˜¯å¾ˆå‡†ç¡®ï¼Œå¯¼è‡´åˆ†å¸ƒåå·®æ¯”è¾ƒå¤§ï¼Œä½†åŸºæœ¬ä¸Šæ˜¯åˆ†æˆä¸¤ç±»çš„ã€‚</p>

<h4 id="ç”µå½±æ¨è">ç”µå½±æ¨è</h4>
<p>é‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬æŒ‡å®šä¸€ä¸ªç”¨æˆ·åï¼Œåˆ™å¯ä»¥ä¸ºè¯¥ç”¨æˆ·æ¨èä»–å€¾å‘ä¸»é¢˜çš„ç”µå½±ã€‚<br />
æœ¬ä¾‹ä¸­çš„æ•°æ®åå·®æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥è®¡ç®—çš„ç»“æœæœ‰ç‚¹æ²¡æœ‰è¯´æœåŠ›ï¼Œä»…ä¾›å‚è€ƒã€‚</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">filter_matrix</span> <span class="o">=</span> <span class="n">RATE_MATRIX</span> <span class="o">&lt;</span> <span class="mf">1e-8</span>
<span class="n">rec_mat</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">dot</span><span class="p">(</span><span class="n">item_dis</span><span class="p">,</span> <span class="n">user_dis</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'é‡å»ºçŸ©é˜µï¼Œå¹¶è¿‡æ»¤æ‰å·²ç»çœ‹è¿‡çš„ç”µå½±'</span><span class="p">)</span>
<span class="n">rec_filter_mat</span> <span class="o">=</span> <span class="p">(</span><span class="n">filter_matrix</span> <span class="o">*</span> <span class="n">rec_mat</span><span class="p">).</span><span class="n">T</span>
<span class="k">print</span><span class="p">(</span><span class="n">rec_filter_mat</span><span class="p">)</span>

<span class="n">rec_user</span> <span class="o">=</span> <span class="s">'Rusty'</span>  <span class="c1"># éœ€è¦è¿›è¡Œæ¨èçš„ç”¨æˆ·
</span><span class="n">rec_userid</span> <span class="o">=</span> <span class="n">user</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="n">rec_user</span><span class="p">)</span>  <span class="c1"># æ¨èç”¨æˆ·ID
</span><span class="n">rec_list</span> <span class="o">=</span> <span class="n">rec_filter_mat</span><span class="p">[</span><span class="n">rec_userid</span><span class="p">,</span> <span class="p">:]</span>  <span class="c1"># æ¨èç”¨æˆ·çš„ç”µå½±åˆ—è¡¨
</span>
<span class="k">print</span><span class="p">(</span><span class="s">'æ¨èç”¨æˆ·çš„ç”µå½±ï¼š'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">rec_list</span><span class="p">))</span>
</code></pre></div></div>
<p>æ‰§è¡Œç»“æœï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]),)</span>
</code></pre></div></div>
<h4 id="å®Œæ•´ä»£ç ">å®Œæ•´ä»£ç </h4>
<p>ä¸Šé¢ä¸ºäº†å™è¿°æ–¹ä¾¿ï¼Œæ‰“æ•£ã€ç®€åŒ–å¹¶ä¸”çœç•¥äº†ä¸€äº›ä»£ç ã€‚ä¸‹é¢æ˜¯å®Œæ•´çš„ä»£ç ï¼Œå¹¶ä¸”å› ä¸ºXJåŒå­¦çš„è¯¾ç¨‹è¦æ±‚ï¼Œä½¿ç”¨äº†python3ä»£ç ã€‚å—¯ï¼Œpython3å¯¹äºä¸­æ–‡çš„æ”¯æŒçš„ç¡®å¥½äº†å¾ˆå¤šå“ˆã€‚</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env python3
</span>
<span class="c1">#pip3 install sklearn scipy numpy matplotlib
</span>
<span class="kn">from</span> <span class="nn">sklearn.decomposition</span> <span class="kn">import</span> <span class="n">NMF</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.font_manager</span> <span class="kn">import</span> <span class="n">FontProperties</span>

<span class="n">item</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">'å¸Œç‰¹å‹’å›æ¥äº†'</span><span class="p">,</span> <span class="s">'æ­»ä¾'</span><span class="p">,</span> <span class="s">'æˆ¿é—´'</span><span class="p">,</span> <span class="s">'é¾™è™¾'</span><span class="p">,</span> <span class="s">'å¤§ç©ºå¤´'</span><span class="p">,</span>
    <span class="s">'æç›—è€…'</span><span class="p">,</span> <span class="s">'è£ç¼'</span><span class="p">,</span> <span class="s">'å…«æ¶äºº'</span><span class="p">,</span> <span class="s">'å®ä¹ ç”Ÿ'</span><span class="p">,</span> <span class="s">'é—´è°ä¹‹æ¡¥'</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">user</span> <span class="o">=</span> <span class="p">[</span><span class="s">'äº”æŸ³å›'</span><span class="p">,</span> <span class="s">'å¸•æ ¼å°¼å…­'</span><span class="p">,</span> <span class="s">'æœ¨æ‘é™é¦™'</span><span class="p">,</span> <span class="s">'WTF'</span><span class="p">,</span> <span class="s">'airyyouth'</span><span class="p">,</span>
        <span class="s">'æ©™å­c'</span><span class="p">,</span> <span class="s">'ç§‹æœˆç™½'</span><span class="p">,</span> <span class="s">'clavin_kong'</span><span class="p">,</span> <span class="s">'olit'</span><span class="p">,</span> <span class="s">'You_æŸäºº'</span><span class="p">,</span>
        <span class="s">'å‡›å†¬å°†è‡³'</span><span class="p">,</span> <span class="s">'Rusty'</span><span class="p">,</span> <span class="s">'å™¢ï¼ä½ çœ‹ï¼'</span><span class="p">,</span> <span class="s">'Aron'</span><span class="p">,</span> <span class="s">'ErDong Chen'</span><span class="p">]</span>
<span class="n">RATE_MATRIX</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">(</span>
    <span class="p">[[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
     <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
     <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
     <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
     <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
     <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
     <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
     <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
     <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
     <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
<span class="p">)</span>

<span class="n">nmf_model</span> <span class="o">=</span> <span class="n">NMF</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># è®¾æœ‰2ä¸ªä¸»é¢˜
</span><span class="n">item_dis</span> <span class="o">=</span> <span class="n">nmf_model</span><span class="p">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">RATE_MATRIX</span><span class="p">)</span>
<span class="n">user_dis</span> <span class="o">=</span> <span class="n">nmf_model</span><span class="p">.</span><span class="n">components_</span>

<span class="k">print</span><span class="p">(</span><span class="s">'ç”¨æˆ·çš„ä¸»é¢˜åˆ†å¸ƒï¼š'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">user_dis</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'ç”µå½±çš„ä¸»é¢˜åˆ†å¸ƒï¼š'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">item_dis</span><span class="p">)</span>

<span class="n">filter_matrix</span> <span class="o">=</span> <span class="n">RATE_MATRIX</span> <span class="o">&lt;</span> <span class="mf">1e-8</span>
<span class="n">rec_mat</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">dot</span><span class="p">(</span><span class="n">item_dis</span><span class="p">,</span> <span class="n">user_dis</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">'é‡å»ºçŸ©é˜µï¼Œå¹¶è¿‡æ»¤æ‰å·²ç»è¯„åˆ†çš„ç‰©å“ï¼š'</span><span class="p">)</span>
<span class="n">rec_filter_mat</span> <span class="o">=</span> <span class="p">(</span><span class="n">filter_matrix</span> <span class="o">*</span> <span class="n">rec_mat</span><span class="p">).</span><span class="n">T</span>
<span class="k">print</span><span class="p">(</span><span class="n">rec_filter_mat</span><span class="p">)</span>

<span class="n">rec_user</span> <span class="o">=</span> <span class="s">'Rusty'</span>  <span class="c1"># éœ€è¦è¿›è¡Œæ¨èçš„ç”¨æˆ·
#rec_user = 'å‡›å†¬å°†è‡³'  # éœ€è¦è¿›è¡Œæ¨èçš„ç”¨æˆ·
</span><span class="n">rec_userid</span> <span class="o">=</span> <span class="n">user</span><span class="p">.</span><span class="n">index</span><span class="p">(</span><span class="n">rec_user</span><span class="p">)</span>  <span class="c1"># æ¨èç”¨æˆ·ID
</span><span class="n">rec_list</span> <span class="o">=</span> <span class="n">rec_filter_mat</span><span class="p">[</span><span class="n">rec_userid</span><span class="p">,</span> <span class="p">:]</span>  <span class="c1"># æ¨èç”¨æˆ·çš„ç”µå½±åˆ—è¡¨
</span>
<span class="k">print</span><span class="p">(</span><span class="s">'æ¨èç”¨æˆ·çš„ç”µå½±ï¼š'</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">rec_list</span><span class="p">))</span>


<span class="c1">######################################################################
</span><span class="n">fontP</span> <span class="o">=</span> <span class="n">FontProperties</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="s">"/System/Library/Fonts/STHeiti Light.ttc"</span><span class="p">)</span>
<span class="n">fontP</span><span class="p">.</span><span class="n">set_size</span><span class="p">(</span><span class="s">'small'</span><span class="p">)</span>

<span class="n">plt1</span> <span class="o">=</span> <span class="n">plt</span>
<span class="n">plt1</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">item_dis</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">item_dis</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="s">'ro'</span><span class="p">)</span>
<span class="n">plt1</span><span class="p">.</span><span class="n">draw</span><span class="p">()</span><span class="c1">#ç›´æ¥ç”»å‡ºçŸ©é˜µï¼Œåªæ‰“äº†ç‚¹ï¼Œä¸‹é¢å¯¹å›¾plt1è¿›è¡Œä¸€äº›è®¾ç½®
</span>
<span class="n">plt1</span><span class="p">.</span><span class="n">xlim</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">plt1</span><span class="p">.</span><span class="n">ylim</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">plt1</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="sa">u</span><span class="s">'the distribution of items (NMF)'</span><span class="p">)</span><span class="c1">#è®¾ç½®å›¾çš„æ ‡é¢˜
</span>
<span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">zipitem</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">item_dis</span><span class="p">)</span><span class="c1">#æŠŠç”µå½±æ ‡é¢˜å’Œç”µå½±çš„åæ ‡è”ç³»åœ¨ä¸€èµ·
</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">zipitem</span><span class="p">:</span>
    <span class="n">item_name</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">plt1</span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">item_name</span><span class="p">,</span>
              <span class="n">fontproperties</span><span class="o">=</span><span class="n">fontP</span><span class="p">,</span> 
              <span class="n">horizontalalignment</span><span class="o">=</span><span class="s">'center'</span><span class="p">,</span>
              <span class="n">verticalalignment</span><span class="o">=</span><span class="s">'top'</span><span class="p">)</span>
<span class="n">plt1</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">user_dis</span> <span class="o">=</span> <span class="n">user_dis</span><span class="p">.</span><span class="n">T</span> <span class="c1">#æŠŠè½¬ç½®ç”¨æˆ·åˆ†å¸ƒçŸ©é˜µ
</span><span class="n">plt2</span> <span class="o">=</span> <span class="n">plt</span>
<span class="n">plt2</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">user_dis</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">user_dis</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="s">'ro'</span><span class="p">)</span>
<span class="n">plt2</span><span class="p">.</span><span class="n">xlim</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">plt2</span><span class="p">.</span><span class="n">ylim</span><span class="p">((</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">plt2</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="sa">u</span><span class="s">'the distribution of user (NMF)'</span><span class="p">)</span><span class="c1">#è®¾ç½®å›¾çš„æ ‡é¢˜
</span>
<span class="n">zipuser</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">user_dis</span><span class="p">)</span><span class="c1">#æŠŠç”µå½±æ ‡é¢˜å’Œç”µå½±çš„åæ ‡è”ç³»åœ¨ä¸€èµ·
</span><span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">zipuser</span><span class="p">:</span>
    <span class="n">user_name</span> <span class="o">=</span> <span class="n">user</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">user</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">plt2</span><span class="p">.</span><span class="n">text</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">user_name</span><span class="p">,</span>
              <span class="n">fontproperties</span><span class="o">=</span><span class="n">fontP</span><span class="p">,</span> 
              <span class="n">horizontalalignment</span><span class="o">=</span><span class="s">'center'</span><span class="p">,</span>
              <span class="n">verticalalignment</span><span class="o">=</span><span class="s">'top'</span><span class="p">)</span>
<span class="n">plt2</span><span class="p">.</span><span class="n">show</span><span class="p">()</span><span class="c1">#ç›´æ¥ç”»å‡ºçŸ©é˜µï¼Œåªæ‰“äº†ç‚¹ï¼Œä¸‹é¢å¯¹å›¾plt1è¿›è¡Œä¸€äº›è®¾ç½®
</span>
</code></pre></div></div>

<p>ç‰¹åˆ«æ„Ÿè°¢ï¼Œä»£ç åŠæ•°æ®è½¬è‡ªï¼š<a href="https://blog.csdn.net/qq_26225295/article/details/51165858">NMF éè´ŸçŸ©é˜µåˆ†è§£(Non-negative Matrix Factorization)å®è·µ</a>ã€‚</p>

:ET