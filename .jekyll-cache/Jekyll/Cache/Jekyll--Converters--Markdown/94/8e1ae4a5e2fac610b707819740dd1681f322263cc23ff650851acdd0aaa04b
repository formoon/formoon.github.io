I"<p><img src="https://raw.githubusercontent.com/formoon/formoon.github.io/master/attachments/201912/hw/huawei-kunpeng920.jpeg" alt="" /></p>
<h4 id="èƒŒæ™¯">èƒŒæ™¯</h4>
<p>ä¸­ç¾è´¸æ˜“å†²çªä»¥æ¥ï¼Œç›¸ä¿¡æœ€å¤§çš„æ„Ÿå—ï¼Œå¹¶ä¸æ˜¯æˆ‘å¯¹ä½ åŠ å¤šå°‘å…³ç¨ï¼Œè€Œæ˜¯æˆ‘æœ‰ï¼Œå¯æˆ‘ä¸å–ç»™ä½ ã€‚â€œç¦å”®â€æˆäº†å¸‚åœºç»æµä¸­æœ€å¤§çš„ç«äº‰åŠ›ã€‚<br />
ç›¸ä¿¡ä¹Ÿæ˜¯å› ä¸ºè¿™ä¸ªåŸå› ï¼Œåä¸ºâ€œå¤‡èƒè½¬æ­£â€çš„é²²é¹ç³»åˆ—èŠ¯ç‰‡ï¼Œä¸€ç»æ¨å‡ºï¼Œå°±å¸å¼•äº†ä¸šç•Œçš„çœ¼çƒã€‚<br />
ç»è¿‡æ¼«é•¿çš„ç­‰å¾…ï¼ŒåŸºäºé²²é¹920ï¼Œä»£è¡¨é«˜ç«¯è®¡ç®—èƒ½åŠ›çš„åä¸ºæœåŠ¡å™¨å·²ç»å¼€å§‹å¤§é‡å‡ºè´§ã€‚ä¸è¿‡ï¼Œé™äºä¸“ä¸šå£å’ï¼ŒæœåŠ¡å™¨ç”¨çš„èŠ¯ç‰‡ï¼Œæ— è®ºå¦‚ä½•ä¹Ÿæ¯”ä¸ä¸Š5Gå’ŒMATE30æ›´ä»¤äººç©ç›®ã€‚<br />
ä»Šå¤©å¶ç„¶å‘ç°ï¼Œåä¸ºäº‘ä¸Šæ­£åœ¨è¿›è¡Œâ€œé²²é¹å¼¹æ€§äº‘æœåŠ¡å™¨â€å…è´¹è¯•ç”¨æ´»åŠ¨ï¼Œäºæ˜¯è¿…é€Ÿçš„ç”³è¯·äº†ä¸€å°å°é²œã€‚<br />
<img src="https://raw.githubusercontent.com/formoon/formoon.github.io/master/attachments/201912/hw/huawei-event.png" alt="" /></p>

<h4 id="åŸºæœ¬ç¯å¢ƒ">åŸºæœ¬ç¯å¢ƒ</h4>
<p>æœ€åŸºæœ¬çš„è¯•ç”¨å¥—é¤ä¸­ï¼ŒåŒ…æ‹¬ä¸€å°1æ ¸ã€1Gå†…å­˜ã€1Må¸¦å®½çš„å¼¹æ€§æœåŠ¡å™¨ï¼›ä¸€ä¸ª100Gçš„äº‘ç¡¬ç›˜è¿˜æœ‰ä¸€ä¸ªåŠ¨æ€çš„å…¬ç½‘IPã€‚ä¸ªäººç”¨æˆ·å¯ä»¥å…è´¹è¯•ç”¨15å¤©ã€‚<br />
<img src="https://raw.githubusercontent.com/formoon/formoon.github.io/master/attachments/201912/hw/huawei-order.png" alt="" /></p>

<p>æœåŠ¡å™¨å¯é€‰å¤šç§æ“ä½œç³»ç»Ÿï¼Œåä¸ºæ¨èçš„æ˜¯è‡ªæœ‰çš„æ¬§æ‹‰æ“ä½œç³»ç»Ÿ(EulerOS)ã€‚è¿™æ˜¯åä¸ºåŸºäºCentOSå®šåˆ¶çš„ç‰ˆæœ¬ï¼ŒåŒ…å«äº†å¤šç§æœåŠ¡å™¨åœºæ™¯çš„ä¼˜åŒ–ï¼Œå¯¹äºARM64èŠ¯ç‰‡ä¹Ÿæœ‰æ›´å¥½çš„æ”¯æŒã€‚å…¶å®ƒè¿˜æœ‰10ä½™ç§é€‰æ‹©ï¼Œéƒ½æ˜¯Linuxç±»çš„å„ç§å‘è¡Œç‰ˆæœ¬ã€‚<br />
ä¸¥é‡ä¾èµ–Windowsç³»åˆ—çš„è¯â€¦ä½ ç°åœ¨å¯ä»¥é€€æ•£äº†ï¼Œé™¤äº†Windowsæ“ä½œç³»ç»Ÿå½“å‰è¿˜ç»‘å®šåœ¨X86ç³»åˆ—CPUä¹‹ä¸Šï¼Œå¾®è½¯ç³»åˆ—ä¹Ÿå±ç¦å”®ä¹‹åˆ—ã€‚<br />
ä½œä¸ºè¯•ç”¨ï¼Œé¦–å…ˆè¦â€œç©â€èµ·æ¥æ–¹ä¾¿ï¼Œæˆ‘é€‰æ‹©äº†Ubuntu18.04ç³»ç»Ÿã€‚<br />
<img src="https://raw.githubusercontent.com/formoon/formoon.github.io/master/attachments/201912/hw/huawei-panel.png" alt="" /></p>

<p>è·Ÿå¸¸è§çš„äº‘ç«¯ç³»ç»Ÿä¸€æ ·ï¼Œè´­ä¹°å®Œæˆï¼ŒæœåŠ¡å™¨ä¼šå¿«é€Ÿçš„è‡ªå·±å®Œæˆé…ç½®ã€å¯åŠ¨ã€‚åä¸ºäº‘æä¾›äº†åŸºäºæµè§ˆå™¨çš„ç»ˆç«¯ç•Œé¢ï¼š <img src="https://raw.githubusercontent.com/formoon/formoon.github.io/master/attachments/201912/hw/huawei-console.png" alt="" /></p>

<p>ä¸€å¼€å§‹åªæœ‰ä¸€ä¸ªrootï¼Œåˆ©ç”¨æµè§ˆå™¨çš„ç»ˆç«¯ï¼Œæ–°å»ºä¸€ä¸ªæ—¥å¸¸ä½¿ç”¨çš„è´¦å·ï¼Œå‡çº§å„é¡¹æ›´æ–°å’Œè¡¥ä¸ï¼Œé‡å¯ï¼Œç„¶åå¯ä»¥æ”¾å¿ƒå®‰å…¨çš„åœ¨è¿œç¨‹ä½¿ç”¨sshç™»é™†äº†ã€‚æœ‰ä¸€ä¸ªåŠ¨æ€å…¬ç½‘IPï¼Œè¿˜æ˜¯æ–¹ä¾¿å¾ˆå¤šã€‚<br />
æ•´ä¸ªè¿‡ç¨‹æµç•…ã€ç¨³å®šï¼Œç¬¬ä¸€å°è±¡è·Ÿé€šå¸¸ä½¿ç”¨çš„æœåŠ¡å™¨å¹¶æ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚å¦‚æœä¸ä½¿ç”¨unameæ£€æŸ¥å†…æ ¸ï¼Œå®Œå…¨æ„Ÿè§‰ä¸åˆ°æ˜¯ä¸€å°ARMæœåŠ¡å™¨ã€‚</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$</span> <span class="nx">uname</span> <span class="o">-</span><span class="nx">a</span>
<span class="nx">Linux</span> <span class="nx">ecs</span><span class="o">-</span><span class="nx">kc1</span><span class="o">-</span><span class="nx">small</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="nx">linux</span><span class="o">-</span><span class="mi">20191209185931</span> <span class="mf">4.15</span><span class="p">.</span><span class="mi">0</span><span class="o">-</span><span class="mi">72</span><span class="o">-</span><span class="nx">generic</span> <span class="err">#</span><span class="mi">81</span><span class="o">-</span><span class="nx">Ubuntu</span> <span class="nx">SMP</span> <span class="nx">Tue</span> <span class="nx">Nov</span> <span class="mi">26</span> <span class="mi">12</span><span class="p">:</span><span class="mi">21</span><span class="p">:</span><span class="mi">09</span> <span class="nx">UTC</span> <span class="mi">2019</span> <span class="nx">aarch64</span> <span class="nx">aarch64</span> <span class="nx">aarch64</span> <span class="nx">GNU</span><span class="o">/</span><span class="nx">Linux</span>
</code></pre></div></div>
<p>å…ˆæ¥çœ‹çœ‹é…ç½®ï¼ŒCPU:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$</span> <span class="nx">cat</span> <span class="o">/</span><span class="nx">proc</span><span class="o">/</span><span class="nx">cpuinfo</span>
<span class="nx">processor</span>	<span class="p">:</span> <span class="mi">0</span>
<span class="nx">BogoMIPS</span>	<span class="p">:</span> <span class="mf">200.00</span>
<span class="nx">Features</span>	<span class="p">:</span> <span class="nx">fp</span> <span class="nx">asimd</span> <span class="nx">evtstrm</span> <span class="nx">aes</span> <span class="nx">pmull</span> <span class="nx">sha1</span> <span class="nx">sha2</span> <span class="nx">crc32</span> <span class="nx">atomics</span> <span class="nx">fphp</span> <span class="nx">asimdhp</span> <span class="nx">cpuid</span> <span class="nx">asimdrdm</span> <span class="nx">jscvt</span> <span class="nx">fcma</span> <span class="nx">dcpop</span> <span class="nx">asimddp</span> <span class="nx">asimdfhm</span>
<span class="nx">CPU</span> <span class="nx">implementer</span>	<span class="p">:</span> <span class="mh">0x48</span>
<span class="nx">CPU</span> <span class="nx">architecture</span><span class="p">:</span> <span class="mi">8</span>
<span class="nx">CPU</span> <span class="nx">variant</span>	<span class="p">:</span> <span class="mh">0x1</span>
<span class="nx">CPU</span> <span class="nx">part</span>	<span class="p">:</span> <span class="mh">0xd01</span>
<span class="nx">CPU</span> <span class="nx">revision</span>	<span class="p">:</span> <span class="mi">0</span>
</code></pre></div></div>
<p>æ¥ç€æ˜¯å†…å­˜ï¼š</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$</span> <span class="nx">cat</span> <span class="o">/</span><span class="nx">proc</span><span class="o">/</span><span class="nx">meminfo</span>
<span class="nx">MemTotal</span><span class="p">:</span>        <span class="mi">1006904</span> <span class="nx">kB</span>
<span class="nx">MemFree</span><span class="p">:</span>          <span class="mi">387044</span> <span class="nx">kB</span>
<span class="nx">MemAvailable</span><span class="p">:</span>     <span class="mi">671300</span> <span class="nx">kB</span>
<span class="nx">Buffers</span><span class="p">:</span>           <span class="mi">33604</span> <span class="nx">kB</span>
<span class="nx">Cached</span><span class="p">:</span>           <span class="mi">296076</span> <span class="nx">kB</span>
<span class="nx">SwapCached</span><span class="p">:</span>         <span class="mi">1148</span> <span class="nx">kB</span>
<span class="nx">Active</span><span class="p">:</span>           <span class="mi">217232</span> <span class="nx">kB</span>
<span class="nx">Inactive</span><span class="p">:</span>         <span class="mi">275692</span> <span class="nx">kB</span>
<span class="nx">Active</span><span class="p">(</span><span class="nx">anon</span><span class="p">):</span>      <span class="mi">59824</span> <span class="nx">kB</span>
<span class="nx">Inactive</span><span class="p">(</span><span class="nx">anon</span><span class="p">):</span>   <span class="mi">119960</span> <span class="nx">kB</span>
<span class="nx">Active</span><span class="p">(</span><span class="nx">file</span><span class="p">):</span>     <span class="mi">157408</span> <span class="nx">kB</span>
<span class="nx">Inactive</span><span class="p">(</span><span class="nx">file</span><span class="p">):</span>   <span class="mi">155732</span> <span class="nx">kB</span>
<span class="nx">Unevictable</span><span class="p">:</span>           <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">Mlocked</span><span class="p">:</span>               <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">SwapTotal</span><span class="p">:</span>       <span class="mi">1762696</span> <span class="nx">kB</span>
<span class="nx">SwapFree</span><span class="p">:</span>        <span class="mi">1729472</span> <span class="nx">kB</span>
<span class="nx">Dirty</span><span class="p">:</span>             <span class="mi">28632</span> <span class="nx">kB</span>
<span class="nx">Writeback</span><span class="p">:</span>             <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">AnonPages</span><span class="p">:</span>        <span class="mi">162892</span> <span class="nx">kB</span>
<span class="nx">Mapped</span><span class="p">:</span>            <span class="mi">61680</span> <span class="nx">kB</span>
<span class="nx">Shmem</span><span class="p">:</span>             <span class="mi">16508</span> <span class="nx">kB</span>
<span class="nx">Slab</span><span class="p">:</span>              <span class="mi">96464</span> <span class="nx">kB</span>
<span class="nx">SReclaimable</span><span class="p">:</span>      <span class="mi">60696</span> <span class="nx">kB</span>
<span class="nx">SUnreclaim</span><span class="p">:</span>        <span class="mi">35768</span> <span class="nx">kB</span>
<span class="nx">KernelStack</span><span class="p">:</span>        <span class="mi">2464</span> <span class="nx">kB</span>
<span class="nx">PageTables</span><span class="p">:</span>         <span class="mi">3824</span> <span class="nx">kB</span>
<span class="nx">NFS_Unstable</span><span class="p">:</span>          <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">Bounce</span><span class="p">:</span>                <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">WritebackTmp</span><span class="p">:</span>          <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">CommitLimit</span><span class="p">:</span>     <span class="mi">2266148</span> <span class="nx">kB</span>
<span class="nx">Committed_AS</span><span class="p">:</span>    <span class="mi">1049036</span> <span class="nx">kB</span>
<span class="nx">VmallocTotal</span><span class="p">:</span>   <span class="mi">135290290112</span> <span class="nx">kB</span>
<span class="nx">VmallocUsed</span><span class="p">:</span>           <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">VmallocChunk</span><span class="p">:</span>          <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">HardwareCorrupted</span><span class="p">:</span>     <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">AnonHugePages</span><span class="p">:</span>         <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">ShmemHugePages</span><span class="p">:</span>        <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">ShmemPmdMapped</span><span class="p">:</span>        <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">CmaTotal</span><span class="p">:</span>              <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">CmaFree</span><span class="p">:</span>               <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">HugePages_Total</span><span class="p">:</span>       <span class="mi">0</span>
<span class="nx">HugePages_Free</span><span class="p">:</span>        <span class="mi">0</span>
<span class="nx">HugePages_Rsvd</span><span class="p">:</span>        <span class="mi">0</span>
<span class="nx">HugePages_Surp</span><span class="p">:</span>        <span class="mi">0</span>
<span class="nx">Hugepagesize</span><span class="p">:</span>       <span class="mi">2048</span> <span class="nx">kB</span>
</code></pre></div></div>

<p>è™½è¯´åªæ˜¯ä¸€ä¸ªä½“éªŒï¼Œä½†å¦‚æœæ²¡æœ‰å¯¹æ¯”ï¼Œæˆ‘ä»¬å¾ˆéš¾å¯¹â€œä½“éªŒâ€ç»“æœåšå‡ºä¸€ä¸ªå…¬æ­£çš„è¯„ä»·ã€‚<br />
æ‰€ä»¥æˆ‘åˆåœ¨å›½å†…ä¸‰ç”²çš„äº‘æœåŠ¡å•†ï¼ˆè¿™é‡Œå°±ä¸æåå­—äº†ï¼Œåæ­£æ²¡æœ‰æ‰“æ“‚å°çš„æ„æ€ï¼‰å¦å¤–å€Ÿç”¨äº†ä¸€å°ç”Ÿäº§ç”¨ä¼ ç»ŸIntelè‡³å¼ºçš„æœåŠ¡å™¨ã€‚<br />
åŒæ ·ä½¿ç”¨Ubuntu 18:</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$</span> <span class="nx">uname</span> <span class="o">-</span><span class="nx">a</span>
<span class="nx">Linux</span> <span class="nx">ebs</span><span class="o">-</span><span class="mi">31389</span> <span class="mf">4.15</span><span class="p">.</span><span class="mi">0</span><span class="o">-</span><span class="mi">72</span><span class="o">-</span><span class="nx">generic</span> <span class="err">#</span><span class="mi">81</span><span class="o">-</span><span class="nx">Ubuntu</span> <span class="nx">SMP</span> <span class="nx">Tue</span> <span class="nx">Nov</span> <span class="mi">26</span> <span class="mi">12</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mi">02</span> <span class="nx">UTC</span> <span class="mi">2019</span> <span class="nx">x86_64</span> <span class="nx">x86_64</span> <span class="nx">x86_64</span> <span class="nx">GNU</span><span class="o">/</span><span class="nx">Linux</span>
</code></pre></div></div>
<p>CPUï¼š</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$</span> <span class="nx">cat</span> <span class="o">/</span><span class="nx">proc</span><span class="o">/</span><span class="nx">cpuinfo</span> 
<span class="nx">processor</span>	<span class="p">:</span> <span class="mi">0</span>
<span class="nx">vendor_id</span>	<span class="p">:</span> <span class="nx">GenuineIntel</span>
<span class="nx">cpu</span> <span class="nx">family</span>	<span class="p">:</span> <span class="mi">6</span>
<span class="nx">model</span>		<span class="p">:</span> <span class="mi">63</span>
<span class="nx">model</span> <span class="nx">name</span>	<span class="p">:</span> <span class="nx">Intel</span><span class="p">(</span><span class="nx">R</span><span class="p">)</span> <span class="nx">Xeon</span><span class="p">(</span><span class="nx">R</span><span class="p">)</span> <span class="nx">CPU</span> <span class="nx">E5</span><span class="o">-</span><span class="mi">2678</span> <span class="nx">v3</span> <span class="p">@</span> <span class="mf">2.50</span><span class="nx">GHz</span>
<span class="nx">stepping</span>	<span class="p">:</span> <span class="mi">2</span>
<span class="nx">microcode</span>	<span class="p">:</span> <span class="mh">0x1</span>
<span class="nx">cpu</span> <span class="nx">MHz</span>		<span class="p">:</span> <span class="mf">2494.224</span>
<span class="nx">cache</span> <span class="nx">size</span>	<span class="p">:</span> <span class="mi">4096</span> <span class="nx">KB</span>
<span class="nx">physical</span> <span class="nx">id</span>	<span class="p">:</span> <span class="mi">0</span>
<span class="nx">siblings</span>	<span class="p">:</span> <span class="mi">1</span>
<span class="nx">core</span> <span class="nx">id</span>		<span class="p">:</span> <span class="mi">0</span>
<span class="nx">cpu</span> <span class="nx">cores</span>	<span class="p">:</span> <span class="mi">1</span>
<span class="nx">apicid</span>		<span class="p">:</span> <span class="mi">0</span>
<span class="nx">initial</span> <span class="nx">apicid</span>	<span class="p">:</span> <span class="mi">0</span>
<span class="nx">fpu</span>		<span class="p">:</span> <span class="nx">yes</span>
<span class="nx">fpu_exception</span>	<span class="p">:</span> <span class="nx">yes</span>
<span class="nx">cpuid</span> <span class="nx">level</span>	<span class="p">:</span> <span class="mi">13</span>
<span class="nx">wp</span>		<span class="p">:</span> <span class="nx">yes</span>
<span class="nx">flags</span>		<span class="p">:</span> <span class="nx">fpu</span> <span class="nx">vme</span> <span class="nx">de</span> <span class="nx">pse</span> <span class="nx">tsc</span> <span class="nx">msr</span> <span class="nx">pae</span> <span class="nx">mce</span> <span class="nx">cx8</span> <span class="nx">apic</span> <span class="nx">sep</span> <span class="nx">mtrr</span> <span class="nx">pge</span> <span class="nx">mca</span> <span class="nx">cmov</span> <span class="nx">pat</span> <span class="nx">pse36</span> <span class="nx">clflush</span> <span class="nx">mmx</span> <span class="nx">fxsr</span> <span class="nx">sse</span> <span class="nx">sse2</span> <span class="nx">ss</span> <span class="nx">syscall</span> <span class="nx">nx</span> <span class="nx">pdpe1gb</span> <span class="nx">rdtscp</span> <span class="nx">lm</span> <span class="nx">constant_tsc</span> <span class="nx">arch_perfmon</span> <span class="nx">rep_good</span> <span class="nx">nopl</span> <span class="nx">cpuid</span> <span class="nx">tsc_known_freq</span> <span class="nx">pni</span> <span class="nx">pclmulqdq</span> <span class="nx">ssse3</span> <span class="nx">fma</span> <span class="nx">cx16</span> <span class="nx">pcid</span> <span class="nx">sse4_1</span> <span class="nx">sse4_2</span> <span class="nx">x2apic</span> <span class="nx">movbe</span> <span class="nx">popcnt</span> <span class="nx">tsc_deadline_timer</span> <span class="nx">aes</span> <span class="nx">xsave</span> <span class="nx">avx</span> <span class="nx">f16c</span> <span class="nx">rdrand</span> <span class="nx">hypervisor</span> <span class="nx">lahf_lm</span> <span class="nx">abm</span> <span class="nx">invpcid_single</span> <span class="nx">pti</span> <span class="nx">fsgsbase</span> <span class="nx">tsc_adjust</span> <span class="nx">bmi1</span> <span class="nx">avx2</span> <span class="nx">smep</span> <span class="nx">bmi2</span> <span class="nx">erms</span> <span class="nx">invpcid</span> <span class="nx">xsaveopt</span> <span class="nx">arat</span>
<span class="nx">bugs</span>		<span class="p">:</span> <span class="nx">cpu_meltdown</span> <span class="nx">spectre_v1</span> <span class="nx">spectre_v2</span> <span class="nx">spec_store_bypass</span> <span class="nx">l1tf</span> <span class="nx">mds</span> <span class="nx">swapgs</span> <span class="nx">itlb_multihit</span>
<span class="nx">bogomips</span>	<span class="p">:</span> <span class="mf">4988.44</span>
<span class="nx">clflush</span> <span class="nx">size</span>	<span class="p">:</span> <span class="mi">64</span>
<span class="nx">cache_alignment</span>	<span class="p">:</span> <span class="mi">64</span>
<span class="nx">address</span> <span class="nx">sizes</span>	<span class="p">:</span> <span class="mi">40</span> <span class="nx">bits</span> <span class="nx">physical</span><span class="p">,</span> <span class="mi">48</span> <span class="nx">bits</span> <span class="nx">virtual</span>
<span class="nx">power</span> <span class="nx">management</span><span class="p">:</span>

<span class="nx">processor</span>	<span class="p">:</span> <span class="mi">1</span>
<span class="nx">vendor_id</span>	<span class="p">:</span> <span class="nx">GenuineIntel</span>
<span class="nx">cpu</span> <span class="nx">family</span>	<span class="p">:</span> <span class="mi">6</span>
<span class="nx">model</span>		<span class="p">:</span> <span class="mi">63</span>
<span class="nx">model</span> <span class="nx">name</span>	<span class="p">:</span> <span class="nx">Intel</span><span class="p">(</span><span class="nx">R</span><span class="p">)</span> <span class="nx">Xeon</span><span class="p">(</span><span class="nx">R</span><span class="p">)</span> <span class="nx">CPU</span> <span class="nx">E5</span><span class="o">-</span><span class="mi">2678</span> <span class="nx">v3</span> <span class="p">@</span> <span class="mf">2.50</span><span class="nx">GHz</span>
<span class="nx">stepping</span>	<span class="p">:</span> <span class="mi">2</span>
<span class="nx">microcode</span>	<span class="p">:</span> <span class="mh">0x1</span>
<span class="nx">cpu</span> <span class="nx">MHz</span>		<span class="p">:</span> <span class="mf">2494.224</span>
<span class="nx">cache</span> <span class="nx">size</span>	<span class="p">:</span> <span class="mi">4096</span> <span class="nx">KB</span>
<span class="nx">physical</span> <span class="nx">id</span>	<span class="p">:</span> <span class="mi">1</span>
<span class="nx">siblings</span>	<span class="p">:</span> <span class="mi">1</span>
<span class="nx">core</span> <span class="nx">id</span>		<span class="p">:</span> <span class="mi">0</span>
<span class="nx">cpu</span> <span class="nx">cores</span>	<span class="p">:</span> <span class="mi">1</span>
<span class="nx">apicid</span>		<span class="p">:</span> <span class="mi">1</span>
<span class="nx">initial</span> <span class="nx">apicid</span>	<span class="p">:</span> <span class="mi">1</span>
<span class="nx">fpu</span>		<span class="p">:</span> <span class="nx">yes</span>
<span class="nx">fpu_exception</span>	<span class="p">:</span> <span class="nx">yes</span>
<span class="nx">cpuid</span> <span class="nx">level</span>	<span class="p">:</span> <span class="mi">13</span>
<span class="nx">wp</span>		<span class="p">:</span> <span class="nx">yes</span>
<span class="nx">flags</span>		<span class="p">:</span> <span class="nx">fpu</span> <span class="nx">vme</span> <span class="nx">de</span> <span class="nx">pse</span> <span class="nx">tsc</span> <span class="nx">msr</span> <span class="nx">pae</span> <span class="nx">mce</span> <span class="nx">cx8</span> <span class="nx">apic</span> <span class="nx">sep</span> <span class="nx">mtrr</span> <span class="nx">pge</span> <span class="nx">mca</span> <span class="nx">cmov</span> <span class="nx">pat</span> <span class="nx">pse36</span> <span class="nx">clflush</span> <span class="nx">mmx</span> <span class="nx">fxsr</span> <span class="nx">sse</span> <span class="nx">sse2</span> <span class="nx">ss</span> <span class="nx">syscall</span> <span class="nx">nx</span> <span class="nx">pdpe1gb</span> <span class="nx">rdtscp</span> <span class="nx">lm</span> <span class="nx">constant_tsc</span> <span class="nx">arch_perfmon</span> <span class="nx">rep_good</span> <span class="nx">nopl</span> <span class="nx">cpuid</span> <span class="nx">tsc_known_freq</span> <span class="nx">pni</span> <span class="nx">pclmulqdq</span> <span class="nx">ssse3</span> <span class="nx">fma</span> <span class="nx">cx16</span> <span class="nx">pcid</span> <span class="nx">sse4_1</span> <span class="nx">sse4_2</span> <span class="nx">x2apic</span> <span class="nx">movbe</span> <span class="nx">popcnt</span> <span class="nx">tsc_deadline_timer</span> <span class="nx">aes</span> <span class="nx">xsave</span> <span class="nx">avx</span> <span class="nx">f16c</span> <span class="nx">rdrand</span> <span class="nx">hypervisor</span> <span class="nx">lahf_lm</span> <span class="nx">abm</span> <span class="nx">invpcid_single</span> <span class="nx">pti</span> <span class="nx">fsgsbase</span> <span class="nx">tsc_adjust</span> <span class="nx">bmi1</span> <span class="nx">avx2</span> <span class="nx">smep</span> <span class="nx">bmi2</span> <span class="nx">erms</span> <span class="nx">invpcid</span> <span class="nx">xsaveopt</span> <span class="nx">arat</span>
<span class="nx">bugs</span>		<span class="p">:</span> <span class="nx">cpu_meltdown</span> <span class="nx">spectre_v1</span> <span class="nx">spectre_v2</span> <span class="nx">spec_store_bypass</span> <span class="nx">l1tf</span> <span class="nx">mds</span> <span class="nx">swapgs</span> <span class="nx">itlb_multihit</span>
<span class="nx">bogomips</span>	<span class="p">:</span> <span class="mf">4988.44</span>
<span class="nx">clflush</span> <span class="nx">size</span>	<span class="p">:</span> <span class="mi">64</span>
<span class="nx">cache_alignment</span>	<span class="p">:</span> <span class="mi">64</span>
<span class="nx">address</span> <span class="nx">sizes</span>	<span class="p">:</span> <span class="mi">40</span> <span class="nx">bits</span> <span class="nx">physical</span><span class="p">,</span> <span class="mi">48</span> <span class="nx">bits</span> <span class="nx">virtual</span>
<span class="nx">power</span> <span class="nx">management</span><span class="p">:</span>
</code></pre></div></div>
<p>å†…å­˜ï¼š</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$</span> <span class="nx">cat</span> <span class="o">/</span><span class="nx">proc</span><span class="o">/</span><span class="nx">meminfo</span> 
<span class="nx">MemTotal</span><span class="p">:</span>        <span class="mi">4039500</span> <span class="nx">kB</span>
<span class="nx">MemFree</span><span class="p">:</span>         <span class="mi">1083580</span> <span class="nx">kB</span>
<span class="nx">MemAvailable</span><span class="p">:</span>    <span class="mi">3561040</span> <span class="nx">kB</span>
<span class="nx">Buffers</span><span class="p">:</span>          <span class="mi">206180</span> <span class="nx">kB</span>
<span class="nx">Cached</span><span class="p">:</span>          <span class="mi">2326624</span> <span class="nx">kB</span>
<span class="nx">SwapCached</span><span class="p">:</span>          <span class="mi">296</span> <span class="nx">kB</span>
<span class="nx">Active</span><span class="p">:</span>          <span class="mi">1394884</span> <span class="nx">kB</span>
<span class="nx">Inactive</span><span class="p">:</span>        <span class="mi">1213580</span> <span class="nx">kB</span>
<span class="nx">Active</span><span class="p">(</span><span class="nx">anon</span><span class="p">):</span>      <span class="mi">40644</span> <span class="nx">kB</span>
<span class="nx">Inactive</span><span class="p">(</span><span class="nx">anon</span><span class="p">):</span>    <span class="mi">53080</span> <span class="nx">kB</span>
<span class="nx">Active</span><span class="p">(</span><span class="nx">file</span><span class="p">):</span>    <span class="mi">1354240</span> <span class="nx">kB</span>
<span class="nx">Inactive</span><span class="p">(</span><span class="nx">file</span><span class="p">):</span>  <span class="mi">1160500</span> <span class="nx">kB</span>
<span class="nx">Unevictable</span><span class="p">:</span>           <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">Mlocked</span><span class="p">:</span>               <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">SwapTotal</span><span class="p">:</span>       <span class="mi">4038652</span> <span class="nx">kB</span>
<span class="nx">SwapFree</span><span class="p">:</span>        <span class="mi">4033008</span> <span class="nx">kB</span>
<span class="nx">Dirty</span><span class="p">:</span>                <span class="mi">20</span> <span class="nx">kB</span>
<span class="nx">Writeback</span><span class="p">:</span>             <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">AnonPages</span><span class="p">:</span>         <span class="mi">75392</span> <span class="nx">kB</span>
<span class="nx">Mapped</span><span class="p">:</span>            <span class="mi">88396</span> <span class="nx">kB</span>
<span class="nx">Shmem</span><span class="p">:</span>             <span class="mi">18068</span> <span class="nx">kB</span>
<span class="nx">Slab</span><span class="p">:</span>             <span class="mi">305188</span> <span class="nx">kB</span>
<span class="nx">SReclaimable</span><span class="p">:</span>     <span class="mi">251528</span> <span class="nx">kB</span>
<span class="nx">SUnreclaim</span><span class="p">:</span>        <span class="mi">53660</span> <span class="nx">kB</span>
<span class="nx">KernelStack</span><span class="p">:</span>        <span class="mi">2704</span> <span class="nx">kB</span>
<span class="nx">PageTables</span><span class="p">:</span>         <span class="mi">8312</span> <span class="nx">kB</span>
<span class="nx">NFS_Unstable</span><span class="p">:</span>          <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">Bounce</span><span class="p">:</span>                <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">WritebackTmp</span><span class="p">:</span>          <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">CommitLimit</span><span class="p">:</span>     <span class="mi">6058400</span> <span class="nx">kB</span>
<span class="nx">Committed_AS</span><span class="p">:</span>     <span class="mi">597368</span> <span class="nx">kB</span>
<span class="nx">VmallocTotal</span><span class="p">:</span>   <span class="mi">34359738367</span> <span class="nx">kB</span>
<span class="nx">VmallocUsed</span><span class="p">:</span>           <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">VmallocChunk</span><span class="p">:</span>          <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">HardwareCorrupted</span><span class="p">:</span>     <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">AnonHugePages</span><span class="p">:</span>         <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">ShmemHugePages</span><span class="p">:</span>        <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">ShmemPmdMapped</span><span class="p">:</span>        <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">CmaTotal</span><span class="p">:</span>              <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">CmaFree</span><span class="p">:</span>               <span class="mi">0</span> <span class="nx">kB</span>
<span class="nx">HugePages_Total</span><span class="p">:</span>       <span class="mi">0</span>
<span class="nx">HugePages_Free</span><span class="p">:</span>        <span class="mi">0</span>
<span class="nx">HugePages_Rsvd</span><span class="p">:</span>        <span class="mi">0</span>
<span class="nx">HugePages_Surp</span><span class="p">:</span>        <span class="mi">0</span>
<span class="nx">Hugepagesize</span><span class="p">:</span>       <span class="mi">2048</span> <span class="nx">kB</span>
<span class="nx">DirectMap4k</span><span class="p">:</span>      <span class="mi">106368</span> <span class="nx">kB</span>
<span class="nx">DirectMap2M</span><span class="p">:</span>     <span class="mi">4087808</span> <span class="nx">kB</span>
<span class="nx">DirectMap1G</span><span class="p">:</span>     <span class="mi">2097152</span> <span class="nx">kB</span>
</code></pre></div></div>
<p>ä»ç¡¬ä»¶å‚æ•°ä¸Šçœ‹ï¼Œâ€œé²²é¹â€å¾ˆä¸åˆ©å•Šï¼Œå¯æ€œçš„1æ ¸1Gå†…å­˜ã€‚å¦ä¸€å°Intel XEONè™½è¯´ä¹Ÿä¸æ˜¯å•¥é«˜çº§è´§è‰²ï¼Œä½†2æ ¸4Gå†…å­˜ï¼Œä»»è°çœ‹èµ·æ¥ä¹Ÿæ˜¯ç¢¾å‹å¼çš„å¯¹æ‰‹ã€‚å¦‚æœçŸ¥é“æˆ‘åªèƒ½å€Ÿåˆ°è¿™æ ·ä¸€å°å¯¹æ¯”çš„æœåŠ¡å™¨ï¼Œåœ¨åä¸ºäº‘å°±åº”å½“å¼€ä¸€å°é…ç½®æ›´é«˜çš„æœºå™¨ã€‚å¯æƒœå…è´¹æœºä¼šä»…æœ‰ä¸€æ¬¡ï¼Œä¹Ÿåªèƒ½ç¡¬èµ·å¤´çš®ç»§ç»­äº†ã€‚</p>

<table>
  <thead>
    <tr>
      <th>ä¸»æœº</th>
      <th>TaiShan</th>
      <th>ç«å“å“ç‰ŒæœªçŸ¥</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>CPU</td>
      <td>é²²é¹920</td>
      <td>Intel Xeon</td>
    </tr>
    <tr>
      <td>æ ¸å¿ƒæ•°é‡</td>
      <td>1</td>
      <td>2</td>
    </tr>
    <tr>
      <td>å†…å­˜</td>
      <td>1G</td>
      <td>4G</td>
    </tr>
  </tbody>
</table>

<p>å…¶å®ƒé…ç½®å°±ä¸æ‹‰å‡ºæ¥çœ‹äº†ï¼Œå› ä¸ºå‰©ä¸‹çš„ç¡¬ä»¶å¯¹æœ¬æ¬¡å¯¹æ¯”å½±å“ä¸å¤§ï¼›è½¯ä»¶é…ç½®ï¼Œéƒ½æ˜¯é»˜è®¤çš„åŸºç¡€ç³»ç»Ÿï¼Œä¸¤è¾¹éƒ½æ²¡æœ‰åšä»»ä½•ä¸“é—¨çš„è®¾å®šå’Œè°ƒä¼˜ã€‚å¦‚æœæœ‰åŒºåˆ«ï¼Œé‚£ä¹Ÿæ˜¯äº‘ç«¯å·¥ä½œäººå‘˜æ°´å¹³çš„å‘æŒ¥ï¼Œä¹Ÿå¾—ç®—åŠ åˆ†é¡¹ã€‚</p>

<h4 id="ä½“éªŒå†…å®¹å’Œç¯å¢ƒå‡†å¤‡">ä½“éªŒå†…å®¹å’Œç¯å¢ƒå‡†å¤‡</h4>
<p>æ—©å…ˆè¿˜æ˜¯å¾ˆå–œæ¬¢çœ‹è·‘åˆ†ï¼Œåæ¥æ—¶é—´é•¿äº†ï¼Œå‘ç°è·‘åˆ†çš„å†…å®¹ï¼Œè·Ÿå®é™…å·¥ä½œåŒºåˆ«è¿˜æ˜¯æ¯”è¾ƒå¤§ã€‚å¾€å¾€è·‘åˆ†çš„æŒ‡æ ‡å¾ˆæ¼‚äº®ï¼ŒçœŸæ­£ç”¨èµ·æ¥ï¼Œæ»¡ä¸æ˜¯é‚£ä¹ˆå›äº‹ã€‚<br />
æ‰€ä»¥ä»Šå¤©æˆ‘ä»¬æçš„ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œé€‰æ‹©ä»å‰ç«¯å¼€å‘ã€åç«¯å¼€å‘åŠæœåŠ¡ã€å®¹å™¨ä¸‰ä¸ªæ–¹é¢ï¼Œå¯¹é²²é¹æœåŠ¡å™¨åšä¸€ä¸ªæ·±åº¦ä½“éªŒã€‚æˆ‘æƒ³ä»äº‘æœåŠ¡çš„è§’åº¦ä¸Šè¯´ï¼Œè¿™ä¸‰ç±»åº”ç”¨ï¼Œæ€ä¹ˆä¹Ÿèƒ½æ¶µç›–80%çš„å¸¸è§éœ€æ±‚å§ã€‚<br />
ï¼ˆæ–‡ä¸­æ²¿ç”¨å£å¤´ä¹ æƒ¯æ··ç”¨äº†èŠ¯ç‰‡å“ç‰Œå’ŒæœåŠ¡å™¨å“ç‰Œï¼Œç›¸ä¿¡ä½ çœ‹çš„æ‡‚ï¼Œå°±ä¸å†æ”¹äº†ã€‚ï¼‰</p>

<p>é¦–å…ˆæˆ‘ä»¬å‡†å¤‡ç›¸åº”çš„å·¥å…·å’Œç¯å¢ƒã€‚<br />
å‰ç«¯å¼€å‘é€‰ç”¨node.js/npm/yarnå·¥å…·é“¾ï¼Œvueæ¡†æ¶ã€‚ä¸¤å°æœºå™¨çš„ç‰ˆæœ¬å®Œå…¨ç›¸åŒï¼š</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$</span> <span class="nx">node</span> <span class="o">-</span><span class="nx">v</span>
<span class="nx">v12</span><span class="p">.</span><span class="mf">13.1</span>
<span class="nx">$</span> <span class="nx">npm</span> <span class="o">-</span><span class="nx">v</span>
<span class="mf">6.12</span><span class="p">.</span><span class="mi">1</span>
<span class="nx">$</span> <span class="nx">yarn</span> <span class="o">-</span><span class="nx">v</span>
<span class="mf">1.21</span><span class="p">.</span><span class="mi">0</span>
</code></pre></div></div>
<p>åç«¯é€‰ç”¨PostgreSQLæ•°æ®åº“ï¼Œä¸¤ç«¯ç‰ˆæœ¬ç›¸åŒï¼š</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$</span> <span class="nx">psql</span> <span class="o">--</span><span class="nx">version</span>
<span class="nx">psql</span> <span class="p">(</span><span class="nx">PostgreSQL</span><span class="p">)</span> <span class="mf">10.10</span> <span class="p">(</span><span class="nx">Ubuntu</span> <span class="mf">10.10</span><span class="o">-</span><span class="mi">0</span><span class="nx">ubuntu0</span><span class="p">.</span><span class="mf">18.04</span><span class="p">.</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>
<p>åç«¯å·¥å…·é“¾ä½¿ç”¨Rust nightlyç¼–è¯‘ï¼Œä¸¤ç«¯ç›¸åŒï¼š</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$</span> <span class="nx">rustc</span> <span class="o">-</span><span class="nx">V</span>
<span class="nx">rustc</span> <span class="mf">1.41</span><span class="p">.</span><span class="mi">0</span><span class="o">-</span><span class="nx">nightly</span> <span class="p">(</span><span class="mi">59947</span><span class="nx">fcae</span> <span class="mi">2019</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">08</span><span class="p">)</span>
</code></pre></div></div>
<p>è¿™é‡Œè¡¥å……ä¸€å¥ï¼Œnightlyåªé€‚åˆå¼€å‘å’Œå®éªŒï¼Œè¯·å‹¿åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ã€‚è¿™é‡Œè€ƒè™‘æ—¢ç„¶æ˜¯ä½“éªŒï¼Œå½“ç„¶è¦æœ‰é€‚åº¦çš„è¶…å‰ï¼Œæ‰€ä»¥é€‰ç”¨nightlyç‰ˆæœ¬ã€‚å› ä¸ºæ¯•ç«Ÿç­‰åˆ°ä½ ç”¨çš„æ—¶å€™ï¼Œä»Šå¤©çš„nightlyç‰ˆæœ¬ä¼°è®¡å·²ç»è½¬æ­£äº†ã€‚<br />
åœ¨åç«¯å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜ä¼šä½¿ç”¨åˆ°gcc/git/opensslç­‰å¼€æºå·¥å…·é“¾ã€‚éƒ½ä½¿ç”¨äº†Ubuntuå†…ç½®çš„ç‰ˆæœ¬ï¼Œä¸¤å°æœåŠ¡å™¨ç›¸åŒã€‚å› ä¸ºè¿™äº›å·¥å…·å¹¶éä¸»è¦å¼€å‘ç¯å¢ƒï¼Œè¿™é‡ŒèŠ‚çœç¯‡å¹…ï¼Œå°±ä¸ä¸€ä¸€åˆ—å‡ºç‰ˆæœ¬äº†ã€‚</p>

<p>å®¹å™¨æ–¹é¢ï¼Œå› ä¸ºæ›´å¤šæ˜¯å…¼å®¹æ€§ä½“éªŒï¼Œå¹¶ä¸éœ€è¦ä»€ä¹ˆæŒ‡æ ‡æ•°æ®ï¼Œæ‰€ä»¥åªå®‰è£…äº†é²²é¹æœåŠ¡å™¨ï¼Œç‰ˆæœ¬å¦‚ä¸‹ï¼š</p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$</span> <span class="nx">sudo</span> <span class="nx">docker</span> <span class="nx">version</span>
<span class="nx">Client</span><span class="p">:</span>
 <span class="nx">Version</span><span class="p">:</span>           <span class="mf">18.09</span><span class="p">.</span><span class="mi">7</span>
 <span class="nx">API</span> <span class="nx">version</span><span class="p">:</span>       <span class="mf">1.39</span>
 <span class="nx">Go</span> <span class="nx">version</span><span class="p">:</span>        <span class="nx">go1</span><span class="p">.</span><span class="mf">10.1</span>
 <span class="nx">Git</span> <span class="nx">commit</span><span class="p">:</span>        <span class="mi">2</span><span class="nx">d0083d</span>
 <span class="nx">Built</span><span class="p">:</span>             <span class="nx">Fri</span> <span class="nx">Aug</span> <span class="mi">16</span> <span class="mi">14</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mi">24</span> <span class="mi">2019</span>
 <span class="nx">OS</span><span class="o">/</span><span class="nx">Arch</span><span class="p">:</span>           <span class="nx">linux</span><span class="o">/</span><span class="nx">arm64</span>
 <span class="nx">Experimental</span><span class="p">:</span>      <span class="kc">false</span>

<span class="nx">Server</span><span class="p">:</span>
 <span class="nx">Engine</span><span class="p">:</span>
  <span class="nx">Version</span><span class="p">:</span>          <span class="mf">18.09</span><span class="p">.</span><span class="mi">7</span>
  <span class="nx">API</span> <span class="nx">version</span><span class="p">:</span>      <span class="mf">1.39</span> <span class="p">(</span><span class="nx">minimum</span> <span class="nx">version</span> <span class="mf">1.12</span><span class="p">)</span>
  <span class="nx">Go</span> <span class="nx">version</span><span class="p">:</span>       <span class="nx">go1</span><span class="p">.</span><span class="mf">10.1</span>
  <span class="nx">Git</span> <span class="nx">commit</span><span class="p">:</span>       <span class="mi">2</span><span class="nx">d0083d</span>
  <span class="nx">Built</span><span class="p">:</span>            <span class="nx">Wed</span> <span class="nx">Aug</span> <span class="mi">14</span> <span class="mi">19</span><span class="p">:</span><span class="mi">41</span><span class="p">:</span><span class="mi">23</span> <span class="mi">2019</span>
  <span class="nx">OS</span><span class="o">/</span><span class="nx">Arch</span><span class="p">:</span>          <span class="nx">linux</span><span class="o">/</span><span class="nx">arm64</span>
  <span class="nx">Experimental</span><span class="p">:</span>     <span class="kc">false</span>
</code></pre></div></div>
<p>æœ¬æ–‡ä¸æ˜¯æ•™å­¦ï¼Œæ‰€ä»¥å®‰è£…è¿‡ç¨‹éƒ½å¿½ç•¥ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä¸¤å°æœåŠ¡å™¨åœ¨ç¯å¢ƒæ­å»ºçš„è¿‡ç¨‹ä¸­ï¼Œè¡¨ç°çš„éƒ½å¾ˆæµç•…å¿«æ·ï¼Œæ“ä½œå®Œå…¨ç›¸åŒã€‚å¸¸å¸¸éœ€è¦ä¸“é—¨çœ‹ä¸€çœ¼ä¸»æœºåæ‰èƒ½æƒ³çš„èµ·æ¥è¿™æ˜¯å“ªä¸€å°æœåŠ¡å™¨ã€‚è·Ÿä»¥å¾€æ“ä½œä¸€äº›å¼‚æ„æœåŠ¡å™¨çš„æ—¶å€™æ²Ÿæ²Ÿååå¯†å¸ƒå®Œå…¨ä¸å¯åŒæ—¥è€Œè¯­ã€‚<br />
æ­¤å¤–ï¼Œå„å·¥å…·é“¾å›½å†…çš„é•œåƒç«™ç‚¹å¯¹äºç¯å¢ƒæ­å»ºå¸®åŠ©å¾ˆå¤§ï¼Œæ˜¾è‘—çš„æé«˜äº†æ­å»ºé€Ÿåº¦ã€‚</p>

<h4 id="è¯•ç”¨é¡¹ç›®">è¯•ç”¨é¡¹ç›®</h4>
<p>æœ‰ä¹ æƒ¯ä½¿ç„¶çš„å› ç´ ï¼Œè¿™é‡Œç”¨æ¥æµ‹è¯•æœåŠ¡å™¨çš„é¡¹ç›®é€‰ç”¨äº†Gothinksterçš„RealWorldã€‚RealWorldæ˜¯ä¸€ä¸ªæç®€çš„å¾®å‹åšå®¢ç³»ç»Ÿï¼Œå·ç§°â€œåº”ç”¨å‹æ¼”ç¤ºä¹‹æ¯â€ã€‚æ˜¯ä¸€ä¸ªéº»é›€è™½å°ï¼Œäº”è„ä¿±å·çš„å°åº”ç”¨ã€‚<br />
åœ¨å…¶<a href="https://github.com/gothinkster/realworld">é¡¹ç›®ç½‘ç«™</a>ä¸Šï¼Œæä¾›äº†22ç§å‰ç«¯å’Œ50ç§åç«¯çš„å¼€æºä»£ç ï¼Œä»»ä¸€ç§å‰ç«¯ï¼Œéƒ½å¯ä»¥é…åˆä»»ä¸€ç§åç«¯ç»„åˆå·¥ä½œã€‚<br />
çœ‹äº†å‰é¢çš„ç¯å¢ƒé…ç½®ï¼Œä¼°è®¡ä½ å·²ç»çŒœåˆ°äº†ï¼Œæˆ‘åœ¨è¿™é‡Œé€‰æ‹©äº†Vueçš„å‰ç«¯å’Œrust-rocket-dieselåç«¯çš„ç»„åˆæ–¹å¼ã€‚</p>
<h4 id="å‰ç«¯å¼€å‘">å‰ç«¯å¼€å‘</h4>
<p>æˆ‘ä»¬å…ˆä»å‰ç«¯çœ‹èµ·ï¼Œé¦–å…ˆæŠŠæºç ä¸‹è½½ä¸‹æ¥ï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git clone https://github.com/gothinkster/vue-realworld-example-app
</code></pre></div></div>
<p>ç„¶åä¸‹è½½ç›¸å…³çš„ä¾èµ–åŒ…ï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd </span>vue-realworld-example-app
<span class="nv">$ </span>yarn <span class="nb">install</span>
</code></pre></div></div>
<p>æˆ‘ä»¬éœ€è¦å¯¹æºç åš4å¤„ä¿®æ”¹ï¼š</p>
<ol>
  <li>åœ¨é¡¹ç›®æ ¹ç›®å½•å¢åŠ <code class="language-plaintext highlighter-rouge">vue.config.js</code>æ–‡ä»¶ï¼Œé…ç½®é¡¹ç›®åœ¨ç½‘ç«™ä¸­çš„å­è·¯å¾„ï¼Œæ¯•ç«Ÿè™½ç„¶æ˜¯è¯•ç”¨ï¼Œç›´æ¥æŠŠæ ¹ç›®å½•å¼€æ”¾ç»™RealWorldä¹Ÿå¤ªä¸è®²ç©¶äº†ã€‚</li>
  <li>Vueå†™çš„å‰ç«¯ï¼Œä½¿ç”¨äº†å•ç½‘é¡µç»“æ„ã€‚ä¸åŒåŠŸèƒ½ä¹‹é—´ï¼Œçœ‹ä¸Šå»æ˜¯ä¸åŒçš„ç½‘é¡µï¼Œå®é™…æ˜¯Vueæˆªè·URLåœ°å€ï¼Œåœ¨å±å¹•ç»„ä»¶ä¹‹é—´çš„åˆ‡æ¢ã€‚ä¸ºäº†è®©Vueè·¯ç”±å·¥ä½œå‡†ç¡®ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹<code class="language-plaintext highlighter-rouge">src/router/index.js</code>æ–‡ä»¶ï¼Œè®¾ç½®è·¯ç”±æ¨¡å¼å’ŒåŸºç¡€ç½‘é¡µæ–‡ä»¶URLã€‚</li>
  <li>å‰ç«¯åŒåç«¯ä¹‹é—´ï¼Œä½¿ç”¨Restfulçš„æ¥å£é€šè®¯ï¼Œæˆ‘ä»¬éœ€è¦åœ¨<code class="language-plaintext highlighter-rouge">src/common/config.js</code>æ–‡ä»¶ä¸­è®¾ç½®è¿™ä¸ªAPIåŸºç¡€åœ°å€ã€‚</li>
  <li><code class="language-plaintext highlighter-rouge">src/store/auth.module.js</code>æ–‡ä»¶ï¼ŒUPDATE_USERæ–¹æ³•ä¸­ï¼Œæœ‰ä¸€å¤„BUGã€‚è¿™ä¸€å¤„é—®é¢˜åŒå¤§å¤šæ•°åç«¯é…åˆä¸­ä½“ç°ä¸å‡ºæ¥ï¼Œä½†åŒRustè¿™ç§ä¸¥æ ¼çš„åç«¯é…åˆï¼Œä¼šå¯¼è‡´ç”¨æˆ·æ— æ³•ç¼–è¾‘ä¸ªäººèµ„æ–™ã€‚éœ€è¦ä¿®æ”¹å‡½æ•°ä¸­çš„æ•°æ®æäº¤éƒ¨åˆ†ã€‚</li>
</ol>

<p>æœ¬æ–‡ä¸åšæ•™å­¦ï¼Œç›¸ä¿¡å¤§å®¶ä¹Ÿæ²¡å…´è¶£çœ‹æ•™å­¦ï¼Œæ‰€ä»¥å…·ä½“çš„ä¿®æ”¹ã€é…ç½®æ–¹æ³•éƒ½ç•¥è¿‡ã€‚æˆ‘ä»¬åªæ¥çœ‹ç¼–è¯‘çš„è¿‡ç¨‹ã€‚<br />
é¦–å…ˆæ˜¯åœ¨é²²é¹æœåŠ¡å™¨ä¸Šï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">time </span>yarn build
yarn run v1.21.0
<span class="nv">$ </span>cross-env <span class="nv">BABEL_ENV</span><span class="o">=</span>dev vue-cli-service build

â ‡  Building <span class="k">for </span>production...

  File                                      Size             Gzipped

  dist/js/chunk-vendors.dcd10e99.js         172.11 KiB       58.87 KiB
  dist/js/chunk-52fabea2.8d54de7e.js        35.24 KiB        10.74 KiB
  dist/js/app.5e06b01a.js                   19.41 KiB        5.56 KiB
  dist/js/chunk-8ab06c80.0691ea34.js        13.74 KiB        4.53 KiB
  dist/js/chunk-fee37f4e.962c341f.js        5.50 KiB         1.80 KiB
  dist/js/chunk-2d0b3289.4ecc4d5e.js        3.68 KiB         1.17 KiB
  dist/js/chunk-2d217357.a492fd23.js        3.20 KiB         1.15 KiB
  dist/js/chunk-704fe663.1eb6fa07.js        2.94 KiB         1.14 KiB
  dist/js/chunk-2d0d6d35.3e7333df.js        2.92 KiB         1.15 KiB
  dist/js/chunk-2d2086b7.9e172229.js        2.57 KiB         1.12 KiB
  dist/precache-manifest.d3673753a0030f7    1.66 KiB         0.55 KiB
  ef7bc3318dfea2bf8.js
  dist/service-worker.js                    0.95 KiB         0.54 KiB
  dist/js/chunk-2d0bd246.4cab42ec.js        0.58 KiB         0.40 KiB
  dist/js/chunk-2d0f1193.580d39c8.js        0.57 KiB         0.40 KiB
  dist/js/chunk-2d0cedd0.a32d9392.js        0.53 KiB         0.38 KiB
  dist/js/chunk-2d207fb4.d8669731.js        0.48 KiB         0.35 KiB
  dist/js/chunk-2d0bac97.f736bcaf.js        0.48 KiB         0.35 KiB

  Images and other types of assets omitted.

 DONE  Build complete. The dist directory is ready to be deployed.
 INFO  Check out deployment instructions at https://cli.vuejs.org/guide/deployment.html
                                  
Done <span class="k">in </span>23.57s.

real	0m23.889s
user	0m19.927s
sys	0m0.965s
</code></pre></div></div>
<p>ä¸ºäº†å‡å°‘ç¯‡å¹…ï¼Œæ—¥å¿—ä¿¡æ¯åˆ é™¤äº†ä¸ªåˆ«æºç æ ¼å¼çš„è­¦å‘Šä¿¡æ¯ã€‚ä¸€åˆ‡éƒ½å¾ˆæ­£å¸¸ï¼Œæ²¡æœ‰ä»€ä¹ˆä¸å…¼å®¹çš„ç°è±¡å‘ç”Ÿã€‚å†æ¥çœ‹çœ‹Intelçš„è¡¨ç°ï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">time </span>yarn build
yarn run v1.21.0
<span class="nv">$ </span>cross-env <span class="nv">BABEL_ENV</span><span class="o">=</span>dev vue-cli-service build

â ‡  Building <span class="k">for </span>production...

  File                                      Size             Gzipped

  dist/js/chunk-vendors.dcd10e99.js         172.11 KiB       58.87 KiB
  dist/js/chunk-52fabea2.c34912e7.js        35.24 KiB        10.74 KiB
  dist/js/app.348e5166.js                   19.35 KiB        5.53 KiB
  dist/js/chunk-8ab06c80.3fa2c5de.js        13.74 KiB        4.53 KiB
  dist/js/chunk-fee37f4e.55893266.js        5.50 KiB         1.80 KiB
  dist/js/chunk-2d0b3289.7b3abcbe.js        3.68 KiB         1.17 KiB
  dist/js/chunk-2d217357.e2eb7ad1.js        3.20 KiB         1.14 KiB
  dist/js/chunk-704fe663.25958462.js        2.94 KiB         1.14 KiB
  dist/js/chunk-2d0d6d35.ddc63fdd.js        2.92 KiB         1.15 KiB
  dist/js/chunk-2d2086b7.35190064.js        2.57 KiB         1.12 KiB
  dist/precache-manifest.049c26b68ee8b9c    1.55 KiB         0.53 KiB
  603c4f04a6cd8e3c8.js
  dist/service-worker.js                    0.95 KiB         0.54 KiB
  dist/js/chunk-2d0bd246.b354ca7f.js        0.58 KiB         0.40 KiB
  dist/js/chunk-2d0f1193.12c44839.js        0.57 KiB         0.40 KiB
  dist/js/chunk-2d0cedd0.ea949ae4.js        0.53 KiB         0.38 KiB
  dist/js/chunk-2d207fb4.245dc458.js        0.48 KiB         0.35 KiB
  dist/js/chunk-2d0bac97.74e3c28d.js        0.48 KiB         0.35 KiB

  Images and other types of assets omitted.

 DONE  Build complete. The dist directory is ready to be deployed.
 INFO  Check out deployment instructions at https://cli.vuejs.org/guide/deployment.html
                                  
Done <span class="k">in </span>16.27s.

real	0m16.548s
user	0m20.435s
sys	0m1.223s
</code></pre></div></div>
<p>åˆ°åº•å¤šä¸€é¢—æ ¸å¿ƒå’Œ4å€çš„å†…å­˜ï¼Œç¼–è¯‘é€Ÿåº¦å¿«äº†çº¦30%ã€‚<br />
è€ƒè™‘åˆ°åŒæ–¹çš„ç¡¬ä»¶é…ç½®ï¼Œæˆ‘ä¸»è§‚è§‰å¾—ç®—ä¸¤å®¶å¹³æ‰‹è¯´å¾—ä¸Šå…¬å¹³ã€‚</p>

<h4 id="åç«¯å¼€å‘">åç«¯å¼€å‘</h4>
<p>é¦–å…ˆä¹Ÿæ˜¯è‡ª<a href="https://github.com/TatriX/realworld-rust-rocket">ä»“åº“</a>ä¸‹è½½æºç ã€‚<br />
æ¥ç€è¦åšè¿™æ ·å‡ ä»¶äº‹æƒ…ï¼š</p>
<ol>
  <li>åç«¯åŸæ¥åªæœ‰ä¸€ç»„Restfulæ¥å£çš„æœåŠ¡ï¼Œæˆ‘ä»¬éœ€è¦è®©å®ƒèƒ½ç›´æ¥æä¾›é™æ€æ–‡ä»¶æœåŠ¡ï¼Œå¦åˆ™è¿˜è¦å¦å¤–é…ç½®ä¸€ä¸ªé™æ€æ–‡ä»¶æœåŠ¡æ¥å®¹çº³åˆšæ‰ç¼–è¯‘å¥½çš„å‰ç«¯æ–‡ä»¶ã€‚æˆ‘ä¿®æ”¹äº†<code class="language-plaintext highlighter-rouge">src/lib.rs</code>ç¨‹åºï¼Œå¢åŠ äº†å¤„ç†å‡½æ•°ï¼Œå°†<code class="language-plaintext highlighter-rouge">./static/</code>æ–‡ä»¶å¤¹å¼€æ”¾ä¸ºé™æ€æ–‡ä»¶è·¯å¾„ã€‚</li>
  <li>å°†Vueå‰ç«¯ç¼–è¯‘çš„ç»“æœï¼Œæ˜¯åœ¨Vueé¡¹ç›®çš„<code class="language-plaintext highlighter-rouge">dist/</code>è·¯å¾„ä¸­ï¼Œå®Œæ•´æ‹·è´åˆ°å½“å‰é¡¹ç›®çš„<code class="language-plaintext highlighter-rouge">static/</code>ç›®å½•ã€‚</li>
  <li>æ ¹æ®ä»£ç ä»“åº“ç½‘é¡µçš„è¯´æ˜ï¼Œé…ç½®PostgreSQLæœåŠ¡ï¼Œå’Œä½¿ç”¨Diesel ORMå·¥å…·åˆå§‹åŒ–realworldæ•°æ®åº“ã€‚</li>
</ol>

<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨Rustçš„å¼€å‘æ¨¡å¼ï¼Œæ¥åšä¸€ä¸ªè¯•è¿è¡Œï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>cargo run
</code></pre></div></div>
<p>åœ¨Intelçš„æœåŠ¡å™¨ä¸Šï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸€åˆ‡æ­£å¸¸ã€‚è€Œåœ¨é²²é¹ä¸Šï¼Œä¸å¹¸çš„äº‹æƒ…å‘ç”Ÿäº†ï¼Œå‘ç”Ÿäº†æŠ¥é”™ï¼Œæ—¥å¿—è¿‡ç¨‹å¾ˆé•¿ï¼Œä¸‹é¢åªæˆªå–äº†é”™è¯¯ä¿¡æ¯çš„ä¸€è¡Œï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>undefined reference to <span class="sb">`</span>rust_crypto_util_fixed_time_eq_asm<span class="s1">'
</span></code></pre></div></div>
<p>ä¸å‡ºä¹æ„æ–™ï¼Œè¿™æ˜¯è·Ÿæ±‡ç¼–æœ‰å…³çš„ä¸œè¥¿ã€‚<br />
æŠ€æœ¯å‘å±•åˆ°ä»Šå¤©ï¼Œåœ¨ä¸‡èƒ½çš„Linuxå¸®åŠ©ä¸‹ï¼Œå¤§å¤šçš„å¼‚æ„ç³»ç»Ÿéƒ½èƒ½è“¬å‹ƒå‘å±•ï¼Œå‰ææ˜¯ï¼Œå¦‚æœä¸æ¶‰åŠåˆ°æ±‡ç¼–éƒ¨åˆ†ã€‚<br />
ä¸ºäº†æµ‹è¯•èƒ½å¤Ÿç»§ç»­ï¼Œæ ¹æ®å‡ºé”™ä¿¡æ¯ï¼Œæ£€æŸ¥rust-cryptoå·¥å…·ç®±æºç ã€‚<br />
å¾ˆå¿«å‘ç°ï¼Œåœ¨<code class="language-plaintext highlighter-rouge">rust-crypto-0.2.36/src/util_helpers.c</code>æ–‡ä»¶ä¸­ï¼Œåªæœ‰X64/ARMä¸¤ç§æ¶æ„çš„æ±‡ç¼–è¯­è¨€ã€‚é²²é¹è™½ç„¶ä¹Ÿæ˜¯ARMï¼Œä½†æ˜¯aarch64æ¶æ„ï¼Œå¯¹åº”çš„æ±‡ç¼–è¯­è¨€ä»£ç å¹¶ä¸å­˜åœ¨ã€‚<br />
å› ä¸ºæˆ‘å¯¹æ±‡ç¼–ä¹Ÿä¸ç†Ÿæ‚‰ï¼Œæ‰€ä»¥å¼€å§‹åœ¨äº’è”ç½‘ä¸Šå„ç§æœç´¢ã€‚åŠŸå¤«ä¸è´Ÿæœ‰å¿ƒäººï¼Œç»è¿‡å¤§æ¦‚ä¸€å°æ—¶çš„åŠªåŠ›ï¼Œåœ¨ç½‘ä¸Šæ‰¾åˆ°äº†ä¸€æ®µæœ¬å‡½æ•°aarch64çš„å®ç°ï¼š</p>
<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#ifdef __aarch64__
</span><span class="kt">uint32_t</span> <span class="nf">rust_crypto_util_fixed_time_eq_asm</span><span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span> <span class="n">lhsp</span><span class="p">,</span> <span class="kt">uint8_t</span><span class="o">*</span> <span class="n">rhsp</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">count</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">uint8_t</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">asm</span><span class="p">(</span>
        <span class="s">" \
            1: \
            \
            ldrb w4, [%1]; \
            ldrb w5, [%2]; \
            eor w4, w4, w5; \
            orr %w0, %w0, w4; \
            \
            add %w1, %w1, #1; \
            add %w2, %w2, #1; \
            subs %w3, %w3, #1; \
            bne 1b; \
        "</span>
        <span class="o">:</span> <span class="s">"+&amp;r"</span> <span class="p">(</span><span class="n">result</span><span class="p">),</span> <span class="s">"+&amp;r"</span> <span class="p">(</span><span class="n">lhsp</span><span class="p">),</span> <span class="s">"+&amp;r"</span> <span class="p">(</span><span class="n">rhsp</span><span class="p">),</span> <span class="s">"+&amp;r"</span> <span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="c1">// all input and output</span>
        <span class="o">:</span> <span class="c1">// input</span>
        <span class="o">:</span> <span class="s">"w4"</span><span class="p">,</span> <span class="s">"w5"</span><span class="p">,</span> <span class="s">"cc"</span> <span class="c1">// clobbers</span>
    <span class="p">);</span>
    
    <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#endif
</span></code></pre></div></div>
<p>æŠŠè¿™æ®µä»£ç æ”¾è¿›<code class="language-plaintext highlighter-rouge">util_helpers.c</code>ï¼Œå†æ¬¡æ‰§è¡Œ<code class="language-plaintext highlighter-rouge">cargo run</code>ï¼Œrealworldè¿è¡ŒæˆåŠŸäº†ã€‚<br />
<img src="https://raw.githubusercontent.com/formoon/formoon.github.io/master/attachments/201912/hw/realworld1.png" alt="" /><br />
éšä¾¿å‘ä¸€ä¸ªåšæ–‡ï¼š<br />
<img src="https://raw.githubusercontent.com/formoon/formoon.github.io/master/attachments/201912/hw/realworld2.png" alt="" /><br />
è¯•è¿è¡Œæ­£å¸¸ï¼Œæ¥ä¸‹æ¥è®©ä¸¤å®¶å†æ¬¡å±•ç°ä¸€ä¸‹ç¼–è¯‘çš„å®åŠ›å§ã€‚ é¦–å…ˆè¯·é²²é¹å‡ºåœºï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">time </span>cargo build <span class="nt">--release</span>
   Compiling libc v0.2.66
   Compiling autocfg v0.1.7
   Compiling cfg-if v0.1.10
    ...<span class="o">(</span>ç•¥å»<span class="o">)</span>...
   Compiling rocket_cors v0.4.0
   Compiling rocket_contrib v0.4.2
   Compiling realworld v0.4.0 <span class="o">(</span>/home/andrew/dev/realworld-rust-rocket<span class="o">)</span>
    Finished release <span class="o">[</span>optimized] target<span class="o">(</span>s<span class="o">)</span> <span class="k">in </span>18m 28s

real	18m28.666s
user	18m8.184s
sys	0m10.982s
</code></pre></div></div>
<p>ä¸€å…±æ˜¯191ä¸ªæºç åŒ…ï¼Œæ—¥å¿—èŠ‚çœç¯‡å¹…ï¼Œåªåˆ—å‡ºäº†å…¶ä¸­çš„6ä¸ªï¼Œç¼–è¯‘è€—è´¹æ—¶é—´18åˆ†28ç§’ï¼Œç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶8.4Mã€‚</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-lh</span> target/release/
total 15M
drwxrwxr-x 64 andrew andrew 4.0K Dec 10 09:27 build
drwxrwxr-x  2 andrew andrew  32K Dec 10 09:45 deps
drwxrwxr-x  2 andrew andrew 4.0K Dec 10 09:27 examples
drwxrwxr-x  2 andrew andrew 4.0K Dec 10 09:27 incremental
<span class="nt">-rw-rw-r--</span>  1 andrew andrew 1.2K Dec 10 09:45 librealworld.d
<span class="nt">-rw-rw-r--</span>  2 andrew andrew 6.2M Dec 10 09:45 librealworld.rlib
<span class="nt">-rwxrwxr-x</span>  2 andrew andrew 8.4M Dec 10 09:45 realworld
<span class="nt">-rw-rw-r--</span>  1 andrew andrew 1.2K Dec 10 09:45 realworld.d
</code></pre></div></div>
<p>æ¥ç€æ¥çœ‹Intelçš„é€Ÿåº¦ï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">time </span>cargo build <span class="nt">--release</span>
   Compiling libc v0.2.65
   Compiling autocfg v0.1.7
   Compiling cfg-if v0.1.10
    ...<span class="o">(</span>ç•¥å»<span class="o">)</span>...
   Compiling rocket_cors v0.4.0
   Compiling rocket_contrib v0.4.2
   Compiling realworld v0.4.0 <span class="o">(</span>/home/andrew/dev/rust/realworld-rust-rocket<span class="o">)</span>
    Finished release <span class="o">[</span>optimized] target<span class="o">(</span>s<span class="o">)</span> <span class="k">in </span>7m 39s

real	7m39.088s
user	15m1.126s
sys	0m13.470s

<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-lh</span> target/release/
total 16M
drwxrwxr-x 64 andrew andrew 4.0K Dec 10 01:38 build
drwxrwxr-x  2 andrew andrew  36K Dec 10 01:45 deps
drwxrwxr-x  2 andrew andrew 4.0K Dec 10 01:38 examples
drwxrwxr-x  2 andrew andrew 4.0K Dec 10 01:38 incremental
<span class="nt">-rw-rw-r--</span>  1 andrew andrew 1.3K Dec 10 01:45 librealworld.d
<span class="nt">-rw-rw-r--</span>  2 andrew andrew 6.3M Dec 10 01:45 librealworld.rlib
<span class="nt">-rwxrwxr-x</span>  2 andrew andrew 9.0M Dec 10 01:45 realworld
<span class="nt">-rw-rw-r--</span>  1 andrew andrew 1.3K Dec 10 01:45 realworld.d
</code></pre></div></div>
<p>ï¼ˆæ‰‹åŠ¨æ‰¶é¢ï¼‰IntelåªèŠ±äº†ç•¥è¶…é²²é¹1/3çš„æ—¶é—´å®Œæˆç¼–è¯‘ï¼Œç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶9Mã€‚è¿™ä¸€æ¬¡ï¼Œé²²é¹å¤§æ¯”åˆ†è½åäº†ã€‚</p>

<h4 id="æ€§èƒ½æµ‹è¯•å·¥å…·">æ€§èƒ½æµ‹è¯•å·¥å…·</h4>
<p>äº’è”ç½‘åº”ç”¨ä¸åŒäºæ¡Œé¢åº”ç”¨ï¼Œä¸ºäº†å®Œæ•´å¯¹æ€§èƒ½è¿›è¡Œæ£€æµ‹ï¼Œæˆ‘ä»¬éœ€è¦ä¸€æ¬¾ç‹¬ç«‹çš„æµ‹è¯•å·¥å…·ã€‚<br />
Ubuntuçš„è½¯ä»¶æºä¸­å·²ç»é›†æˆäº†ä¸€äº›ï¼Œä¸è¿‡æˆ‘é€‰ç”¨äº†Wrkï¼Œä»æºç å¼€å§‹ç¼–è¯‘ä¸€éï¼Œè¿™æ ·ï¼ŒC/C++çš„ç¼–è¯‘é€Ÿåº¦å’Œå…¼å®¹æƒ…å†µï¼Œä¹Ÿå°±é¡ºä¾¿çœ‹åˆ°äº†ã€‚<br />
ä»¥ä¸‹æ­¥éª¤æ‰§è¡Œåœ¨é²²é¹æœåŠ¡å™¨ä¸Šï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ä¸‹è½½æºç </span>
<span class="nv">$ </span>git clone https://github.com/wg/wrk
<span class="c"># ç¼–è¯‘</span>
<span class="nv">$ </span><span class="nb">cd </span>wrk
<span class="nv">$ </span><span class="nb">time </span>make
Building LuaJIT...
make[1]: Entering directory <span class="s1">'/home/andrew/dev/wrk/obj/LuaJIT-2.1.0-beta3'</span>
<span class="o">====</span> Building LuaJIT 2.1.0-beta3 <span class="o">====</span>
make <span class="nt">-C</span> src
make[2]: Entering directory <span class="s1">'/home/andrew/dev/wrk/obj/LuaJIT-2.1.0-beta3/src'</span>
HOSTCC    host/minilua.o
HOSTLINK  host/minilua
DYNASM    host/buildvm_arch.h
HOSTCC    host/buildvm.o
HOSTCC    host/buildvm_asm.o
HOSTCC    host/buildvm_peobj.o
HOSTCC    host/buildvm_lib.o
HOSTCC    host/buildvm_fold.o
HOSTLINK  host/buildvm
BUILDVM   lj_vm.S
ASM       lj_vm.o
CC        lj_gc.o
BUILDVM   lj_ffdef.h
CC        lj_err.o
CC        lj_char.o
BUILDVM   lj_bcdef.h
CC        lj_bc.o
  ...
gcc  <span class="nt">-I</span><span class="nb">.</span> <span class="nt">-Icrypto</span>/include <span class="nt">-Iinclude</span> <span class="nt">-fPIC</span> <span class="nt">-pthread</span> <span class="nt">-Wa</span>,--noexecstack <span class="nt">-Wall</span> <span class="nt">-O3</span> <span class="nt">-DOPENSSL_USE_NODELETE</span> <span class="nt">-DOPENSSL_PIC</span> <span class="nt">-DOPENSSL_CPUID_OBJ</span> <span class="nt">-DOPENSSL_BN_ASM_MONT</span> <span class="nt">-DSHA1_ASM</span> <span class="nt">-DSHA256_ASM</span> <span class="nt">-DSHA512_ASM</span> <span class="nt">-DKECCAK1600_ASM</span> <span class="nt">-DVPAES_ASM</span> <span class="nt">-DECP_NISTZ256_ASM</span> <span class="nt">-DPOLY1305_ASM</span> <span class="nt">-DOPENSSLDIR</span><span class="o">=</span><span class="s2">"</span><span class="se">\"</span><span class="s2">/home/andrew/dev/wrk/obj/ssl</span><span class="se">\"</span><span class="s2">"</span> <span class="nt">-DENGINESDIR</span><span class="o">=</span><span class="s2">"</span><span class="se">\"</span><span class="s2">/home/andrew/dev/wrk/obj/lib/engines-1.1</span><span class="se">\"</span><span class="s2">"</span> <span class="nt">-DNDEBUG</span>  <span class="nt">-MMD</span> <span class="nt">-MF</span> crypto/ec/ec_check.d.tmp <span class="nt">-MT</span> crypto/ec/ec_check.o <span class="nt">-c</span> <span class="nt">-o</span> crypto/ec/ec_check.o crypto/ec/ec_check.c
gcc  <span class="nt">-I</span><span class="nb">.</span> <span class="nt">-Icrypto</span>/include <span class="nt">-Iinclude</span> <span class="nt">-fPIC</span> <span class="nt">-pthread</span> <span class="nt">-Wa</span>,--noexecstack <span class="nt">-Wall</span> <span class="nt">-O3</span> <span class="nt">-DOPENSSL_USE_NODELETE</span> <span class="nt">-DOPENSSL_PIC</span> <span class="nt">-DOPENSSL_CPUID_OBJ</span> <span class="nt">-DOPENSSL_BN_ASM_MONT</span> <span class="nt">-DSHA1_ASM</span> <span class="nt">-DSHA256_ASM</span> <span class="nt">-DSHA512_ASM</span> <span class="nt">-DKECCAK1600_ASM</span> <span class="nt">-DVPAES_ASM</span> <span class="nt">-DECP_NISTZ256_ASM</span> <span class="nt">-DPOLY1305_ASM</span> <span class="nt">-DOPENSSLDIR</span><span class="o">=</span><span class="s2">"</span><span class="se">\"</span><span class="s2">/home/andrew/dev/wrk/obj/ssl</span><span class="se">\"</span><span class="s2">"</span> <span class="nt">-DENGINESDIR</span><span class="o">=</span><span class="s2">"</span><span class="se">\"</span><span class="s2">/home/andrew/dev/wrk/obj/lib/engines-1.1</span><span class="se">\"</span><span class="s2">"</span> <span class="nt">-DNDEBUG</span>  <span class="nt">-MMD</span> <span class="nt">-MF</span> crypto/ec/ec_curve.d.tmp <span class="nt">-MT</span> crypto/ec/ec_curve.o <span class="nt">-c</span> <span class="nt">-o</span> crypto/ec/ec_curve.o crypto/ec/ec_curve.c
  ...
gcc  <span class="nt">-I</span><span class="nb">.</span> <span class="nt">-Iinclude</span> <span class="nt">-fPIC</span> <span class="nt">-pthread</span> <span class="nt">-Wa</span>,--noexecstack <span class="nt">-Wall</span> <span class="nt">-O3</span> <span class="nt">-DOPENSSL_USE_NODELETE</span> <span class="nt">-DOPENSSL_PIC</span> <span class="nt">-DOPENSSL_CPUID_OBJ</span> <span class="nt">-DOPENSSL_BN_ASM_MONT</span> <span class="nt">-DSHA1_ASM</span> <span class="nt">-DSHA256_ASM</span> <span class="nt">-DSHA512_ASM</span> <span class="nt">-DKECCAK1600_ASM</span> <span class="nt">-DVPAES_ASM</span> <span class="nt">-DECP_NISTZ256_ASM</span> <span class="nt">-DPOLY1305_ASM</span> <span class="nt">-DOPENSSLDIR</span><span class="o">=</span><span class="s2">"</span><span class="se">\"</span><span class="s2">/home/andrew/dev/wrk/obj/ssl</span><span class="se">\"</span><span class="s2">"</span> <span class="nt">-DENGINESDIR</span><span class="o">=</span><span class="s2">"</span><span class="se">\"</span><span class="s2">/home/andrew/dev/wrk/obj/lib/engines-1.1</span><span class="se">\"</span><span class="s2">"</span> <span class="nt">-DNDEBUG</span>  <span class="nt">-MMD</span> <span class="nt">-MF</span> ssl/t1_trce.d.tmp <span class="nt">-MT</span> ssl/t1_trce.o <span class="nt">-c</span> <span class="nt">-o</span> ssl/t1_trce.o ssl/t1_trce.c
gcc  <span class="nt">-I</span><span class="nb">.</span> <span class="nt">-Iinclude</span> <span class="nt">-fPIC</span> <span class="nt">-pthread</span> <span class="nt">-Wa</span>,--noexecstack <span class="nt">-Wall</span> <span class="nt">-O3</span> <span class="nt">-DOPENSSL_USE_NODELETE</span> <span class="nt">-DOPENSSL_PIC</span> <span class="nt">-DOPENSSL_CPUID_OBJ</span> <span class="nt">-DOPENSSL_BN_ASM_MONT</span> <span class="nt">-DSHA1_ASM</span> <span class="nt">-DSHA256_ASM</span> <span class="nt">-DSHA512_ASM</span> <span class="nt">-DKECCAK1600_ASM</span> <span class="nt">-DVPAES_ASM</span> <span class="nt">-DECP_NISTZ256_ASM</span> <span class="nt">-DPOLY1305_ASM</span> <span class="nt">-DOPENSSLDIR</span><span class="o">=</span><span class="s2">"</span><span class="se">\"</span><span class="s2">/home/andrew/dev/wrk/obj/ssl</span><span class="se">\"</span><span class="s2">"</span> <span class="nt">-DENGINESDIR</span><span class="o">=</span><span class="s2">"</span><span class="se">\"</span><span class="s2">/home/andrew/dev/wrk/obj/lib/engines-1.1</span><span class="se">\"</span><span class="s2">"</span> <span class="nt">-DNDEBUG</span>  <span class="nt">-MMD</span> <span class="nt">-MF</span> ssl/tls13_enc.d.tmp <span class="nt">-MT</span> ssl/tls13_enc.o <span class="nt">-c</span> <span class="nt">-o</span> ssl/tls13_enc.o ssl/tls13_enc.c
gcc  <span class="nt">-I</span><span class="nb">.</span> <span class="nt">-Iinclude</span> <span class="nt">-fPIC</span> <span class="nt">-pthread</span> <span class="nt">-Wa</span>,--noexecstack <span class="nt">-Wall</span> <span class="nt">-O3</span> <span class="nt">-DOPENSSL_USE_NODELETE</span> <span class="nt">-DOPENSSL_PIC</span> <span class="nt">-DOPENSSL_CPUID_OBJ</span> <span class="nt">-DOPENSSL_BN_ASM_MONT</span> <span class="nt">-DSHA1_ASM</span> <span class="nt">-DSHA256_ASM</span> <span class="nt">-DSHA512_ASM</span> <span class="nt">-DKECCAK1600_ASM</span> <span class="nt">-DVPAES_ASM</span> <span class="nt">-DECP_NISTZ256_ASM</span> <span class="nt">-DPOLY1305_ASM</span> <span class="nt">-DOPENSSLDIR</span><span class="o">=</span><span class="s2">"</span><span class="se">\"</span><span class="s2">/home/andrew/dev/wrk/obj/ssl</span><span class="se">\"</span><span class="s2">"</span> <span class="nt">-DENGINESDIR</span><span class="o">=</span><span class="s2">"</span><span class="se">\"</span><span class="s2">/home/andrew/dev/wrk/obj/lib/engines-1.1</span><span class="se">\"</span><span class="s2">"</span> <span class="nt">-DNDEBUG</span>  <span class="nt">-MMD</span> <span class="nt">-MF</span> ssl/tls_srp.d.tmp <span class="nt">-MT</span> ssl/tls_srp.o <span class="nt">-c</span> <span class="nt">-o</span> ssl/tls_srp.o ssl/tls_srp.c
  ...<span class="o">(</span>ç•¥å»<span class="o">)</span>...
make depend <span class="o">&amp;&amp;</span> make _build_engines
make[2]: Entering directory <span class="s1">'/home/andrew/dev/wrk/obj/openssl-1.1.1b'</span>
make[2]: Leaving directory <span class="s1">'/home/andrew/dev/wrk/obj/openssl-1.1.1b'</span>
make[2]: Entering directory <span class="s1">'/home/andrew/dev/wrk/obj/openssl-1.1.1b'</span>
make[2]: Nothing to be <span class="k">done for</span> <span class="s1">'_build_engines'</span><span class="nb">.</span>
make[2]: Leaving directory <span class="s1">'/home/andrew/dev/wrk/obj/openssl-1.1.1b'</span>
created directory <span class="sb">`</span>/home/andrew/dev/wrk/obj/lib/engines-1.1<span class="s1">'
*** Installing engines
make depend &amp;&amp; make _build_programs
make[2]: Entering directory '</span>/home/andrew/dev/wrk/obj/openssl-1.1.1b<span class="s1">'
make[2]: Leaving directory '</span>/home/andrew/dev/wrk/obj/openssl-1.1.1b<span class="s1">'
make[2]: Entering directory '</span>/home/andrew/dev/wrk/obj/openssl-1.1.1b<span class="s1">'
make[2]: Nothing to be done for '</span>_build_programs<span class="s1">'.
make[2]: Leaving directory '</span>/home/andrew/dev/wrk/obj/openssl-1.1.1b<span class="s1">'
*** Installing runtime programs
install apps/openssl -&gt; /home/andrew/dev/wrk/obj/bin/openssl
install ./tools/c_rehash -&gt; /home/andrew/dev/wrk/obj/bin/c_rehash
make[1]: Leaving directory '</span>/home/andrew/dev/wrk/obj/openssl-1.1.1b<span class="s1">'
CC src/wrk.c
CC src/net.c
CC src/ssl.c
CC src/aprintf.c
CC src/stats.c
CC src/script.c
CC src/units.c
CC src/ae.c
CC src/zmalloc.c
CC src/http_parser.c
LUAJIT src/wrk.lua
LINK wrk

real	3m31.575s
user	3m6.914s
sys	0m22.147s
</span></code></pre></div></div>
<p>è¿™ä¸ªå°å·¥å…·åŒ…å«äº†å¤§é‡çš„cè¯­è¨€æºç å’Œéƒ¨åˆ†æ±‡ç¼–ä»£ç ï¼Œå°‘é‡çš„luaè„šæœ¬å½“åšæ•°æ®æ–‡ä»¶å­˜åœ¨ã€‚<br />
é²²é¹çš„ç¼–è¯‘è¿‡ç¨‹è€—æ—¶3åˆ†32ç§’ã€‚<br />
æ¥ç€æ˜¯Intelè‡³å¼ºï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">time </span>make
Building LuaJIT...
make[1]: Entering directory <span class="s1">'/home/andrew/dev/wrk/obj/LuaJIT-2.1.0-beta3'</span>
<span class="o">====</span> Building LuaJIT 2.1.0-beta3 <span class="o">====</span>
make <span class="nt">-C</span> src
make[2]: Entering directory <span class="s1">'/home/andrew/dev/wrk/obj/LuaJIT-2.1.0-beta3/src'</span>
HOSTCC    host/minilua.o
HOSTLINK  host/minilua
DYNASM    host/buildvm_arch.h
HOSTCC    host/buildvm.o
HOSTCC    host/buildvm_asm.o
HOSTCC    host/buildvm_peobj.o
HOSTCC    host/buildvm_lib.o
HOSTCC    host/buildvm_fold.o
HOSTLINK  host/buildvm
BUILDVM   lj_vm.S
ASM       lj_vm.o
CC        lj_gc.o
BUILDVM   lj_ffdef.h
CC        lj_err.o
CC        lj_char.o
  ......
<span class="nv">CC</span><span class="o">=</span><span class="s2">"gcc"</span> /usr/bin/perl crypto/aes/asm/aesni-mb-x86_64.pl elf crypto/aes/aesni-mb-x86_64.s
gcc <span class="nt">-fPIC</span> <span class="nt">-pthread</span> <span class="nt">-m64</span> <span class="nt">-Wa</span>,--noexecstack <span class="nt">-Wall</span> <span class="nt">-O3</span> <span class="nt">-DOPENSSL_USE_NODELETE</span> <span class="nt">-DL_ENDIAN</span> <span class="nt">-DOPENSSL_PIC</span> <span class="nt">-DOPENSSL_CPUID_OBJ</span> <span class="nt">-DOPENSSL_IA32_SSE2</span> <span class="nt">-DOPENSSL_BN_ASM_MONT</span> <span class="nt">-DOPENSSL_BN_ASM_MONT5</span> <span class="nt">-DOPENSSL_BN_ASM_GF2m</span> <span class="nt">-DSHA1_ASM</span> <span class="nt">-DSHA256_ASM</span> <span class="nt">-DSHA512_ASM</span> <span class="nt">-DKECCAK1600_ASM</span> <span class="nt">-DRC4_ASM</span> <span class="nt">-DMD5_ASM</span> <span class="nt">-DAES_ASM</span> <span class="nt">-DVPAES_ASM</span> <span class="nt">-DBSAES_ASM</span> <span class="nt">-DGHASH_ASM</span> <span class="nt">-DECP_NISTZ256_ASM</span> <span class="nt">-DX25519_ASM</span> <span class="nt">-DPADLOCK_ASM</span> <span class="nt">-DPOLY1305_ASM</span> <span class="nt">-DOPENSSLDIR</span><span class="o">=</span><span class="s2">"</span><span class="se">\"</span><span class="s2">/home/andrew/dev/wrk/obj/ssl</span><span class="se">\"</span><span class="s2">"</span> <span class="nt">-DENGINESDIR</span><span class="o">=</span><span class="s2">"</span><span class="se">\"</span><span class="s2">/home/andrew/dev/wrk/obj/lib/engines-1.1</span><span class="se">\"</span><span class="s2">"</span> <span class="nt">-DNDEBUG</span>  <span class="nt">-c</span> <span class="nt">-o</span> crypto/aes/aesni-mb-x86_64.o crypto/aes/aesni-mb-x86_64.s
<span class="nv">CC</span><span class="o">=</span><span class="s2">"gcc"</span> /usr/bin/perl crypto/aes/asm/aesni-sha1-x86_64.pl elf crypto/aes/aesni-sha1-x86_64.s
gcc <span class="nt">-fPIC</span> <span class="nt">-pthread</span> <span class="nt">-m64</span> <span class="nt">-Wa</span>,--noexecstack <span class="nt">-Wall</span> <span class="nt">-O3</span> <span class="nt">-DOPENSSL_USE_NODELETE</span> <span class="nt">-DL_ENDIAN</span> <span class="nt">-DOPENSSL_PIC</span> <span class="nt">-DOPENSSL_CPUID_OBJ</span> <span class="nt">-DOPENSSL_IA32_SSE2</span> <span class="nt">-DOPENSSL_BN_ASM_MONT</span> <span class="nt">-DOPENSSL_BN_ASM_MONT5</span> <span class="nt">-DOPENSSL_BN_ASM_GF2m</span> <span class="nt">-DSHA1_ASM</span> <span class="nt">-DSHA256_ASM</span> <span class="nt">-DSHA512_ASM</span> <span class="nt">-DKECCAK1600_ASM</span> <span class="nt">-DRC4_ASM</span> <span class="nt">-DMD5_ASM</span> <span class="nt">-DAES_ASM</span> <span class="nt">-DVPAES_ASM</span> <span class="nt">-DBSAES_ASM</span> <span class="nt">-DGHASH_ASM</span> <span class="nt">-DECP_NISTZ256_ASM</span> <span class="nt">-DX25519_ASM</span> <span class="nt">-DPADLOCK_ASM</span> <span class="nt">-DPOLY1305_ASM</span> <span class="nt">-DOPENSSLDIR</span><span class="o">=</span><span class="s2">"</span><span class="se">\"</span><span class="s2">/home/andrew/dev/wrk/obj/ssl</span><span class="se">\"</span><span class="s2">"</span> <span class="nt">-DENGINESDIR</span><span class="o">=</span><span class="s2">"</span><span class="se">\"</span><span class="s2">/home/andrew/dev/wrk/obj/lib/engines-1.1</span><span class="se">\"</span><span class="s2">"</span> <span class="nt">-DNDEBUG</span>  <span class="nt">-c</span> <span class="nt">-o</span> crypto/aes/aesni-sha1-x86_64.o crypto/aes/aesni-sha1-x86_64.s
  ......
gcc  <span class="nt">-I</span><span class="nb">.</span> <span class="nt">-Icrypto</span>/include <span class="nt">-Iinclude</span> <span class="nt">-fPIC</span> <span class="nt">-pthread</span> <span class="nt">-m64</span> <span class="nt">-Wa</span>,--noexecstack <span class="nt">-Wall</span> <span class="nt">-O3</span> <span class="nt">-DOPENSSL_USE_NODELETE</span> <span class="nt">-DL_ENDIAN</span> <span class="nt">-DOPENSSL_PIC</span> <span class="nt">-DOPENSSL_CPUID_OBJ</span> <span class="nt">-DOPENSSL_IA32_SSE2</span> <span class="nt">-DOPENSSL_BN_ASM_MONT</span> <span class="nt">-DOPENSSL_BN_ASM_MONT5</span> <span class="nt">-DOPENSSL_BN_ASM_GF2m</span> <span class="nt">-DSHA1_ASM</span> <span class="nt">-DSHA256_ASM</span> <span class="nt">-DSHA512_ASM</span> <span class="nt">-DKECCAK1600_ASM</span> <span class="nt">-DRC4_ASM</span> <span class="nt">-DMD5_ASM</span> <span class="nt">-DAES_ASM</span> <span class="nt">-DVPAES_ASM</span> <span class="nt">-DBSAES_ASM</span> <span class="nt">-DGHASH_ASM</span> <span class="nt">-DECP_NISTZ256_ASM</span> <span class="nt">-DX25519_ASM</span> <span class="nt">-DPADLOCK_ASM</span> <span class="nt">-DPOLY1305_ASM</span> <span class="nt">-DOPENSSLDIR</span><span class="o">=</span><span class="s2">"</span><span class="se">\"</span><span class="s2">/home/andrew/dev/wrk/obj/ssl</span><span class="se">\"</span><span class="s2">"</span> <span class="nt">-DENGINESDIR</span><span class="o">=</span><span class="s2">"</span><span class="se">\"</span><span class="s2">/home/andrew/dev/wrk/obj/lib/engines-1.1</span><span class="se">\"</span><span class="s2">"</span> <span class="nt">-DNDEBUG</span>  <span class="nt">-MMD</span> <span class="nt">-MF</span> crypto/asn1/x_pkey.d.tmp <span class="nt">-MT</span> crypto/asn1/x_pkey.o <span class="nt">-c</span> <span class="nt">-o</span> crypto/asn1/x_pkey.o crypto/asn1/x_pkey.c
gcc  <span class="nt">-I</span><span class="nb">.</span> <span class="nt">-Icrypto</span>/include <span class="nt">-Iinclude</span> <span class="nt">-fPIC</span> <span class="nt">-pthread</span> <span class="nt">-m64</span> <span class="nt">-Wa</span>,--noexecstack <span class="nt">-Wall</span> <span class="nt">-O3</span> <span class="nt">-DOPENSSL_USE_NODELETE</span> <span class="nt">-DL_ENDIAN</span> <span class="nt">-DOPENSSL_PIC</span> <span class="nt">-DOPENSSL_CPUID_OBJ</span> <span class="nt">-DOPENSSL_IA32_SSE2</span> <span class="nt">-DOPENSSL_BN_ASM_MONT</span> <span class="nt">-DOPENSSL_BN_ASM_MONT5</span> <span class="nt">-DOPENSSL_BN_ASM_GF2m</span> <span class="nt">-DSHA1_ASM</span> <span class="nt">-DSHA256_ASM</span> <span class="nt">-DSHA512_ASM</span> <span class="nt">-DKECCAK1600_ASM</span> <span class="nt">-DRC4_ASM</span> <span class="nt">-DMD5_ASM</span> <span class="nt">-DAES_ASM</span> <span class="nt">-DVPAES_ASM</span> <span class="nt">-DBSAES_ASM</span> <span class="nt">-DGHASH_ASM</span> <span class="nt">-DECP_NISTZ256_ASM</span> <span class="nt">-DX25519_ASM</span> <span class="nt">-DPADLOCK_ASM</span> <span class="nt">-DPOLY1305_ASM</span> <span class="nt">-DOPENSSLDIR</span><span class="o">=</span><span class="s2">"</span><span class="se">\"</span><span class="s2">/home/andrew/dev/wrk/obj/ssl</span><span class="se">\"</span><span class="s2">"</span> <span class="nt">-DENGINESDIR</span><span class="o">=</span><span class="s2">"</span><span class="se">\"</span><span class="s2">/home/andrew/dev/wrk/obj/lib/engines-1.1</span><span class="se">\"</span><span class="s2">"</span> <span class="nt">-DNDEBUG</span>  <span class="nt">-MMD</span> <span class="nt">-MF</span> crypto/asn1/x_sig.d.tmp <span class="nt">-MT</span> crypto/asn1/x_sig.o <span class="nt">-c</span> <span class="nt">-o</span> crypto/asn1/x_sig.o crypto/asn1/x_sig.c
  ...<span class="o">(</span>ç•¥<span class="o">)</span>...
make depend <span class="o">&amp;&amp;</span> make _build_programs
make[2]: Entering directory <span class="s1">'/home/andrew/dev/wrk/obj/openssl-1.1.1b'</span>
make[2]: Leaving directory <span class="s1">'/home/andrew/dev/wrk/obj/openssl-1.1.1b'</span>
make[2]: Entering directory <span class="s1">'/home/andrew/dev/wrk/obj/openssl-1.1.1b'</span>
make[2]: Nothing to be <span class="k">done for</span> <span class="s1">'_build_programs'</span><span class="nb">.</span>
make[2]: Leaving directory <span class="s1">'/home/andrew/dev/wrk/obj/openssl-1.1.1b'</span>
<span class="k">***</span> Installing runtime programs
<span class="nb">install </span>apps/openssl -&gt; /home/andrew/dev/wrk/obj/bin/openssl
<span class="nb">install</span> ./tools/c_rehash -&gt; /home/andrew/dev/wrk/obj/bin/c_rehash
make[1]: Leaving directory <span class="s1">'/home/andrew/dev/wrk/obj/openssl-1.1.1b'</span>
CC src/wrk.c
CC src/net.c
CC src/ssl.c
CC src/aprintf.c
CC src/stats.c
CC src/script.c
CC src/units.c
CC src/ae.c
CC src/zmalloc.c
CC src/http_parser.c
LUAJIT src/wrk.lua
LINK wrk

real	3m48.678s
user	3m9.735s
sys	0m37.941s
andrew@ebs-31389:~/dev/wrk<span class="nv">$ </span>
</code></pre></div></div>
<p>å’¦ï¼Ÿ3åˆ†48ç§’ï¼Œå±…ç„¶ç•¥æ…¢äºé²²é¹ã€‚<br />
å…¶å®è®¤çœŸåˆ†æä¸€ä¸‹ï¼Œæˆ‘è§‰å¾—ä¹Ÿæ˜¯æ­£å¸¸çš„ã€‚ä»å®˜æ–¹å…¬å¸ƒçš„æ•°æ®æ¥çœ‹ï¼Œé²²é¹çš„æ ¸å¿ƒæ€§èƒ½å¹¶ä¸å·®ï¼Œå¦‚æœä»»åŠ¡æ¯”è¾ƒå°ï¼Œåœ¨å†…å­˜ä¸­å°±èƒ½å®Œæˆï¼Œé‚£é²²é¹çš„é€Ÿåº¦æ˜¾ç„¶å°±åº”å½“å¿«ã€‚<br />
è€Œå¦‚æœä»»åŠ¡æ¯”è¾ƒå¤§ï¼Œå¯¼è‡´äº†å¤§é‡çš„ç£ç›˜äº¤æ¢ï¼Œæˆ‘ä»¬é€‰ç”¨çš„è¿™å°ä½é…é²²é¹å°±æ’‘ä¸ä½äº†ï¼Œå†åŠ ä¸Šåªæœ‰ä¸€é¢—æ ¸å¿ƒçš„é…ç½®ã€‚æœ€ç»ˆçš„ç»“æœï¼Œä»»åŠ¡è¶Šå¤§ï¼Œè¿™å°é²²é¹è¢«è½ä¸‹å°±è¶Šå¤šã€‚</p>

<p>å¥½äº†ï¼Œæµ‹è¯•å·¥å…·å‡†å¤‡å®Œæ¯•ï¼Œæˆ‘ä»¬åˆ†åˆ«å¯¹ä¸¤å°æœåŠ¡å™¨çš„WebæœåŠ¡æ€§èƒ½åšä¸€ä¸ªæµ‹è¯•å§ã€‚ç›¸ä¿¡å¯¹äºäº‘ç«¯ä¸»æœºæ¥è®²ï¼Œè¿™ä¸ªæ‰æ˜¯ç¡¬æ æ å•Šã€‚<br />
æŠŠä¸¤è¾¹çš„æœåŠ¡å™¨éƒ½å¯åŠ¨èµ·æ¥ï¼š<br />
<img src="https://raw.githubusercontent.com/formoon/formoon.github.io/master/attachments/201912/hw/realworld-server.png" alt="" /></p>

<p>é¦–å…ˆæ¥çœ‹é²²é¹çš„æµ‹è¯•æ•°æ®ï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>wrk <span class="nt">-t1</span> <span class="nt">-c50</span> <span class="nt">-d5s</span> <span class="nt">--latency</span> <span class="nt">--timeout</span> 2s http://localhost:8000/index.html
Running 5s <span class="nb">test</span> @ http://localhost:8000/index.html
  1 threads and 50 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.97ms    1.04ms   4.58ms   57.80%
    Req/Sec     8.79k   228.58     9.09k    70.00%
  Latency Distribution
     50%    1.97ms
     75%    2.87ms
     90%    3.41ms
     99%    3.78ms
  44400 requests <span class="k">in </span>5.08s, 120.47MB <span class="nb">read
  </span>Socket errors: connect 0, <span class="nb">read </span>44400, write 0, <span class="nb">timeout </span>0
Requests/sec:   8745.40
Transfer/sec:     23.73MB
</code></pre></div></div>
<p>ä¸¤å°æœåŠ¡å™¨çš„é…ç½®åŒºåˆ«æ¯”è¾ƒå¤§ï¼Œå…¬å¹³èµ·è§ï¼Œæˆ‘ä»¬åœ¨å‚æ•°ä¸Šåªå¯ç”¨äº†ä¸€ä¸ªçº¿ç¨‹ã€‚è¿æ¥æ•°é€‰æ‹©50ä¸ªï¼Œæˆ‘æƒ³å¯¹äºä¸€ä¸ªå°å‹ç½‘ç«™ï¼Œè¿™å¯èƒ½æ˜¯æ¯”è¾ƒå…¸å‹çš„æ•°é‡ã€‚<br />
é²²é¹æœåŠ¡å™¨åœ¨5.08ç§’çš„æµ‹è¯•ä¸­ï¼Œæ‰¿å—äº†44400ä¸ªè¯·æ±‚ï¼Œä¸€å…±å‘é€æ•°æ®120.47MBã€‚</p>

<p>æ¥ç€Intelç«™ä¸Šå‰å°ï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>wrk <span class="nt">-t1</span> <span class="nt">-c50</span> <span class="nt">-d5s</span> <span class="nt">--latency</span> <span class="nt">--timeout</span> 2s http://localhost:8000/index.html
Running 5s <span class="nb">test</span> @ http://localhost:8000/index.html
  1 threads and 50 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    32.32ms    5.00ms  64.20ms   75.23%
    Req/Sec     1.52k   176.64     1.91k    72.00%
  Latency Distribution
     50%   31.52ms
     75%   34.64ms
     90%   38.67ms
     99%   48.04ms
  7552 requests <span class="k">in </span>5.00s, 21.97MB <span class="nb">read
  </span>Socket errors: connect 0, <span class="nb">read </span>7550, write 0, <span class="nb">timeout </span>0
Requests/sec:   1509.75
Transfer/sec:      4.39MB
</code></pre></div></div>
<p>å“‡å’”å’”â€¦æœ‰æ²¡æœ‰æƒŠæ‰çœ¼çƒï¼ŸçœŸæ˜¯æ²¡æœ‰å¯¹æ¯”å°±æ²¡æœ‰ä¼¤å®³ã€‚åœ¨5ç§’çš„æµ‹è¯•ä¸­ï¼ŒIntel Xeonåªæ‰¿å—äº†7552ä¸ªè¯·æ±‚ï¼Œå‘é€æ•°æ®21.97MBã€‚ä½œä¸ºä¸€ä¸ªè€ç‰Œçš„CPUå¤§å‚ï¼ŒIntelä½ ä¸¢ä¸ä¸¢â€œèŠ¯â€ï¼Ÿ</p>

<p><code class="language-plaintext highlighter-rouge">index.html</code>åªæ˜¯ä¸€ä¸ªé™æ€é¡µé¢ï¼Œæˆ‘ä»¬æ¢ä¸€ä¸ªåŠ¨æ€é“¾æ¥å†æ¥çœ‹çœ‹ï¼Œè¿™æ ·æ•°æ®åº“çš„éƒ¨åˆ†ä¹Ÿå°±èƒ½ä¸€èµ·ä½“ç°äº†ã€‚<br />
ä¸‹é¢æµ‹è¯•çš„å°±æ˜¯ä¸€ä¸ªRestfulæ¥å£ï¼Œç”¨äºåˆ—å‡ºæ–‡ç« å†…å®¹çš„ï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl http://127.0.0.1:8000/api/articles
<span class="o">{</span><span class="s2">"articles"</span>:[<span class="o">{</span><span class="s2">"author"</span>:<span class="o">{</span><span class="s2">"bio"</span>:null,<span class="s2">"email"</span>:<span class="s2">"andrewwang@sina.com"</span>,<span class="s2">"id"</span>:1,<span class="s2">"image"</span>:null,<span class="s2">"username"</span>:<span class="s2">"andrew"</span><span class="o">}</span>,<span class="s2">"body"</span>:<span class="s2">"è‹¹æœå…¬å¸è¿‘æ—¥å®£å¸ƒï¼Œæ–°çš„Mac Proå’ŒPro Display XDRå°†äº12æœˆ10æ—¥å¼€å§‹è®¢è´­ã€‚æ–°çš„Mac Proèµ·ä»·ä¸º5,999ç¾å…ƒï¼ˆçº¦åˆäººæ°‘å¸42202å…ƒï¼‰ï¼Œè€ŒPro Display XDRèµ·ä»·ä¸º4,999ç¾å…ƒï¼ˆçº¦åˆäººæ°‘å¸35167å…ƒï¼‰ã€‚</span><span class="se">\n</span><span class="s2">5,999ç¾å…ƒçš„åŸºæœ¬æ¬¾Mac Proæ­è½½äº†8æ ¸Intel Xeonå¤„ç†å™¨ï¼Œ256 GB SSDï¼Œ32GB RAMç­‰é…ç½®ã€‚æœ€é«˜é…ç½®æ”¯æŒ28æ ¸Intel Xeonå¤„ç†å™¨ï¼Œ4å—Vegaæ˜¾å¡ï¼Œ1.5TBçš„è¶…å¤§å®¹é‡å†…å­˜ã€‚è€Œå…¶é¦–æ¬¡å¼•å…¥çš„Apple AfterburneråŠ é€Ÿå¡ï¼Œè¿™ä½¿å¾—Mac Proå¯å®æ—¶è§£ç æœ€å¤šè¾¾ 3 æ¡ 8K ProRes RAW è§†é¢‘æµå’Œæœ€å¤šè¾¾ 12 æ¡ 4K ProRes RAW è§†é¢‘æµã€‚</span><span class="se">\n</span><span class="s2">è€Œæ–°æ¬¾çš„ Pro Display XDRåˆ™é…ç½®äº†åˆ†è¾¨ç‡è¾¾åˆ°6016 x 3384çš„32è‹±å¯¸æ˜¾ç¤ºå±ï¼Œè¿™æ¬¾æ˜¾ç¤ºå™¨çš„å‚æ•°è¾¾åˆ°äº†é™æ€ 1000nit / å³°å€¼ 1600nits çš„äº®åº¦ï¼ŒåŒæ—¶è¿˜æœ‰ç€1000000ï¼š1çš„å¯¹æ¯”åº¦ã€‚å¦‚æœç”¨æˆ·è¿½æ±‚ä½åå°„ç‡å’Œä½çœ©å…‰ï¼Œå¯ä»¥å¤šåŠ 1000ç¾å…ƒï¼ˆçº¦åˆäººæ°‘å¸7000å…ƒï¼‰ç»™æ˜¾ç¤ºå™¨æ·»åŠ ä¸€ä¸ªâ€œçº³ç±³çº¹ç†â€å“‘å…‰æ¶‚å±‚ã€‚"</span>,<span class="s2">"createdAt"</span>:<span class="s2">"2019-12-10T02:05:38.758Z"</span>,<span class="s2">"description"</span>:<span class="s2">"nothing but test"</span>,<span class="s2">"favorited"</span>:false,<span class="s2">"favoritesCount"</span>:0,<span class="s2">"id"</span>:1,<span class="s2">"slug"</span>:<span class="s2">"test-sqzxyV"</span>,<span class="s2">"tagList"</span>:[],<span class="s2">"title"</span>:<span class="s2">"test"</span>,<span class="s2">"updatedAt"</span>:<span class="s2">"2019-12-10T02:05:38.758Z"</span><span class="o">}]</span>,<span class="s2">"articlesCount"</span>:1<span class="o">}</span>
</code></pre></div></div>
<p>åŒæ ·ï¼Œå…ˆçœ‹çœ‹é²²é¹çš„è¡¨ç°ï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>wrk <span class="nt">-t1</span> <span class="nt">-c50</span> <span class="nt">-d5s</span> <span class="nt">--latency</span> <span class="nt">--timeout</span> 2s http://127.0.0.1:8000/api/articles
Running 5s <span class="nb">test</span> @ http://127.0.0.1:8000/api/articles
  1 threads and 50 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    40.03ms    2.37ms  41.82ms   99.15%
    Req/Sec     1.25k    11.16     1.27k    66.00%
  Latency Distribution
     50%   40.21ms
     75%   40.48ms
     90%   40.75ms
     99%   41.34ms
  6199 requests <span class="k">in </span>5.00s, 8.92MB <span class="nb">read
  </span>Socket errors: connect 0, <span class="nb">read </span>6198, write 0, <span class="nb">timeout </span>0
Requests/sec:   1239.54
Transfer/sec:      1.78MB
</code></pre></div></div>
<p>Intelç™»åœºï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>wrk <span class="nt">-t1</span> <span class="nt">-c50</span> <span class="nt">-d5s</span> <span class="nt">--latency</span> <span class="nt">--timeout</span> 2s http://127.0.0.1:8000/api/articles
Running 5s <span class="nb">test</span> @ http://127.0.0.1:8000/api/articles
  1 threads and 50 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    62.63ms    9.18ms  96.45ms   72.66%
    Req/Sec   787.82     95.11     1.01k    72.00%
  Latency Distribution
     50%   62.32ms
     75%   68.07ms
     90%   74.42ms
     99%   85.25ms
  3921 requests <span class="k">in </span>5.01s, 5.64MB <span class="nb">read
  </span>Socket errors: connect 0, <span class="nb">read </span>3920, write 0, <span class="nb">timeout </span>0
Requests/sec:    783.09
Transfer/sec:     1.13MB
</code></pre></div></div>
<p>å‘çš„å¸–å­å¤ªçŸ­äº†ï¼Œæ•°æ®æµå¾ˆå°ï¼Œæ—¶é—´å…¨æ¶ˆè€—åœ¨é“¾æ¥ä¸Šäº†ï¼Œæœ‰ç‚¹ä½“ç°ä¸å‡ºæ¥å®åŠ›ã€‚â€¦.ä¸è¿‡â€¦é²²é¹å†æ¬¡å¤§æ¯”åˆ†é¢†å…ˆã€‚åŒæ—¶ä½ è¿˜åˆ«å¿˜äº†ï¼Œè¿™å°æµ‹è¯•çš„é²²é¹æœåŠ¡å™¨ï¼Œå†…å­˜åªæœ‰Intelç«å“çš„1/4ï¼Œä»¥åŠ1/2CPUæ ¸å¿ƒã€‚<br />
ä»è¿™äº›æ•°æ®ï¼Œæˆ‘æƒ³è´Ÿè´£ä»»çš„è¯´ï¼Œå›½äº§èŠ¯ç‰‡å’Œå›½äº§æœåŠ¡å™¨çš„äº‘ç«¯å®åŠ›ï¼Œç¨³äº†ã€‚</p>

<h4 id="å®¹å™¨ä½“éªŒ">å®¹å™¨ä½“éªŒ</h4>
<p>ä»¥å®¹å™¨ä¸ºåŸºç¡€çš„å¾®æœåŠ¡å·²ç»æ˜¯ä»Šå¤©æœåŠ¡å™¨è¿è¥çš„ä¸»æµæ¨¡å¼ã€‚åœ¨è¿™æ–¹é¢é²²é¹æœåŠ¡å™¨åº”å½“è¯´å¾ˆå¹¸è¿ã€‚æ¯•ç«Ÿåªæ˜¯åœ¨Linuxå†…æ ¸å°±èƒ½å®ç°çš„cgroupå’Œnamespaceæ¯”éœ€è¦æ¨¡æ‹ŸæŒ‡ä»¤é›†çš„VMæŠ€æœ¯å®¹æ˜“çš„å¤šã€‚å¯è¯´æ˜¯ä¸ç”Ÿä¿±æ¥ã€‚<br />
ä½†é—®é¢˜ä¹Ÿå¹¶ä¸è¿™ä¹ˆç®€å•ï¼Œæ¯”å¦‚ä½ éšä¾¿æœç´¢ä¸€ä¸ªåº”ç”¨:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># docker search mariadb</span>
NAME                                   DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED
mariadb                                MariaDB is a community-developed fork of MySâ€¦   3135                <span class="o">[</span>OK]                
bitnami/mariadb                        Bitnami MariaDB Docker Image                    107                                     <span class="o">[</span>OK]
linuxserver/mariadb                    A Mariadb container, brought to you by Linuxâ€¦   95                                      
toughiq/mariadb-cluster                Dockerized Automated MariaDB Galera Cluster â€¦   41                                      <span class="o">[</span>OK]
colinmollenhour/mariadb-galera-swarm   MariaDb w/ Galera Cluster, DNS-based serviceâ€¦   26                                      <span class="o">[</span>OK]
panubo/mariadb-galera                  MariaDB Galera Cluster                          23                                      <span class="o">[</span>OK]
lsioarmhf/mariadb                      ARMHF based Linuxserver.io image of mariadb     18                                      
mariadb/server                         MariaDB Server is a modern database <span class="k">for </span>modeâ€¦   18                                      <span class="o">[</span>OK]
webhippie/mariadb                      Docker images <span class="k">for </span>MariaDB                       16                                      <span class="o">[</span>OK]
bianjp/mariadb-alpine                  Lightweight MariaDB docker image with Alpineâ€¦   12                                      <span class="o">[</span>OK]
centos/mariadb-101-centos7             MariaDB 10.1 SQL database server                10                                      
severalnines/mariadb                   A homogeneous MariaDB Galera Cluster image tâ€¦   7                                       <span class="o">[</span>OK]
centos/mariadb-102-centos7             MariaDB 10.2 SQL database server                6                                       
tutum/mariadb                          Base docker image to run a MariaDB database â€¦   4                                       
wodby/mariadb                          Alpine-based MariaDB container image with orâ€¦   4                                       <span class="o">[</span>OK]
circleci/mariadb                       CircleCI images <span class="k">for </span>MariaDB                     3                                       <span class="o">[</span>OK]
tiredofit/mariadb-backup               MariaDB Backup image to backup MariaDB/MySQLâ€¦   2                                       <span class="o">[</span>OK]
kitpages/mariadb-galera                MariaDB with Galera                             2                                       <span class="o">[</span>OK]
rightctrl/mariadb                      Mariadb with Galera support                     2                                       <span class="o">[</span>OK]
jonbaldie/mariadb                      Fast, simple, and lightweight MariaDB Dockerâ€¦   2                                       <span class="o">[</span>OK]
demyx/mariadb                          Non-root Docker image running Alpine Linux aâ€¦   0                                       
ccitest/mariadb                        CircleCI <span class="nb">test </span>images <span class="k">for </span>MariaDB                0                                       <span class="o">[</span>OK]
jelastic/mariadb                       An image of the MariaDB SQL database server â€¦   0                                       
ansibleplaybookbundle/mariadb-apb      An APB which deploys RHSCL MariaDB              0                                       <span class="o">[</span>OK]
alvistack/mariadb                       Docker Image Packaging <span class="k">for </span>MariaDB             0        
</code></pre></div></div>
<p>å—¯å—¯ï¼Œçœ‹èµ·æ¥è·Ÿx86æœåŠ¡å™¨æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ä½†æ˜¯æƒ³æ‹‰ä¸€ä¸ªä¸‹æ¥è¯•è¯•ï¼Ÿäº²ï¼Œä½ è¿˜æ˜¯ç®—äº†å§ã€‚å®¹å™¨æ˜ åƒä¸­æ‰“åŒ…çš„å¯æ˜¯äºŒè¿›åˆ¶çš„æ‰§è¡Œæ–‡ä»¶ï¼Œæ˜¯è¦åŒºåˆ«CPUçš„ï¼Œæ‹‰ä¸‹æ¥ä½ ä¹Ÿç”¨ä¸äº†ã€‚<br />
çœ‹èµ·æ¥ï¼Œè¿™ä¸ªä¸–ç•Œè¿˜æ²¡æœ‰ä¸ºARMæœåŠ¡å™¨çš„åˆ°æ¥åšå¥½å‡†å¤‡ï¼Œè‡³å°‘ä¹Ÿåº”å½“åƒAPT/YUMä¹‹ç±»çš„å·¥å…·ä¸€æ ·ï¼Œè‡ªåŠ¨åŒºåˆ†æ¶æ„æ¥å‡†å¤‡èµ„æºæ± ä¸æ˜¯ï¼Ÿ</p>

<p>æ‰€ä»¥æƒ³è¦æ‰¾é€‚åˆé²²é¹æœåŠ¡å™¨çš„æ˜ åƒæ–‡ä»¶ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ å…³é”®å­—æœç´¢ã€‚<br />
å½“å‰Docker Hubæœ‰ä¸¤ä¸ªåˆ†ç±»é€‚ç”¨64ä½ARMæœåŠ¡å™¨æ¶æ„ï¼Œåˆ†åˆ«æ˜¯<code class="language-plaintext highlighter-rouge">aarch64</code>å’Œ<code class="language-plaintext highlighter-rouge">arm64v8</code>ï¼Œå…¶ä¸­<code class="language-plaintext highlighter-rouge">aarch64</code>åˆ†ç±»å·²ç»ä¸å†ä½¿ç”¨ï¼Œæ–°ä¸Šæ¶çš„æ˜ åƒéƒ½å½’ç±»åˆ°äº†<code class="language-plaintext highlighter-rouge">arm64v8</code>ã€‚ä½†å› ä¸ºå…¼å®¹æ€§è€ƒè™‘ï¼Œ<code class="language-plaintext highlighter-rouge">aarch64</code>åˆ†ç±»åŸæœ‰æ˜ åƒä»ç„¶éƒ½å­˜åœ¨ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœä¸¤ä¸ªåˆ†ç±»éƒ½æœ‰ä½ éœ€è¦çš„æ˜ åƒï¼Œä½ åº”å½“ä¼˜å…ˆé€‰æ‹©<code class="language-plaintext highlighter-rouge">arm64v8</code>åˆ†ç±»ä¸‹é¢çš„ã€‚<br />
æ¥ç€ï¼Œç¬¬äºŒä¸ªå°é—®é¢˜å°±æ¥äº†ï¼Œä½¿ç”¨è¿™ä¸¤ä¸ªå…³é”®å­—æ¥æœç´¢ï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># docker search aarch64</span>
NAME                                      DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED
homeassistant/aarch64-homeassistant                                                       15                                      
aarch64/ubuntu                            Ubuntu is a Debian-based Linux operating sysâ€¦   14                                      
homeassistant/aarch64-hassio-supervisor                                                   5                                       
balenalib/aarch64-ubuntu-node             This image is part of the balena.io base imaâ€¦   1                                       
balenalib/aarch64-alpine-python           This image is part of the balena.io base imaâ€¦   1                                       
resin/aarch64-alpine-python               This repository is deprecated.                  1                                       
resin/aarch64-python                      This repository is deprecated.                  1                                       
resin/aarch64-alpine-buildpack-deps       This repository is deprecated.                  0                                       
resin/aarch64-ubuntu-golang               This repository is deprecated.                  0                                       
resin/aarch64-fedora-buildpack-deps       This repository is deprecated.                  0                                       
resin/aarch64-fedora-python               This repository is deprecated.                  0                                       
resin/aarch64-alpine-openjdk              This repository is deprecated.                  0                                       
balenalib/aarch64-alpine-node             This image is part of the balena.io base imaâ€¦   0                                       
resin/aarch64-fedora-golang               This repository is deprecated.                  0                                       
resin/aarch64-golang                      This repository is deprecated.                  0                                       
resin/aarch64-fedora-openjdk              This repository is deprecated.                  0                                       
resin/aarch64-alpine-golang               This repository is deprecated.                  0                                       
balenalib/aarch64-node                    This image is part of the balena.io base imaâ€¦   0                                       
balenalib/aarch64-debian-node             This image is part of the balena.io base imaâ€¦   0                                       
resin/aarch64-fedora-node                 This repository is deprecated.                  0                                       
resin/aarch64-node                        This repository is deprecated.                  0                                       
resin/aarch64-ubuntu-python               This repository is deprecated.                  0                                       
balenalib/aarch64-ubuntu-golang           This image is part of the balena.io base imaâ€¦   0                                       
resin/aarch64-alpine-node                 This repository is deprecated.                  0                                       
balenalib/aarch64-debian-python           This image is part of the balena.io base imaâ€¦   0       

<span class="c"># docker search arm64v8</span>
NAME                                   DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED
arm64v8/alpine                         A minimal Docker image based on Alpine Linuxâ€¦   45                                      
arm64v8/ubuntu                         Ubuntu is a Debian-based Linux operating sysâ€¦   30                                      
arm64v8/debian                         Debian is a Linux distribution thats composâ€¦   21                                      
arm64v8/nginx                          Official build of Nginx.                        18                                      
arm64v8/python                         Python is an interpreted, interactive, objecâ€¦   18                                      
arm64v8/nextcloud                      A safe home <span class="k">for </span>all your data                   15                                      
arm64v8/node                           Node.js is a JavaScript-based platform <span class="k">for </span>sâ€¦   12                                      
arm64v8/openjdk                        OpenJDK is an open-source implementation of â€¦   9                                       
arm64v8/redis                          Redis is an open <span class="nb">source </span>key-value store thatâ€¦   7                                       
arm64v8/php                            While designed <span class="k">for </span>web development, the PHP â€¦   7                                       
arm64v8/mongo                          MongoDB document databases provide high avaiâ€¦   6                                       
arm64v8/golang                         Go <span class="o">(</span>golang<span class="o">)</span> is a general purpose, higher-levâ€¦   6                                       
arm64v8/docker                         Docker <span class="k">in </span>Docker!                               6                                       
arm64v8/ros                            The Robot Operating System <span class="o">(</span>ROS<span class="o">)</span> is an open â€¦   5                                       
arm64v8/buildpack-deps                 A collection of common build dependencies usâ€¦   3                                       
arm64v8/busybox                        Busybox base image.                             3                                       
arm64v8/ruby                           Ruby is a dynamic, reflective, object-orientâ€¦   2                                       
arm64v8/tomcat                         Apache Tomcat is an open <span class="nb">source </span>implementatiâ€¦   2                                       
arm64v8/erlang                         Erlang is a programming language used to buiâ€¦   1                                       
arm64v8/wordpress                      The WordPress rich content management systemâ€¦   1                                       
arm64v8/joomla                         Joomla! is an open <span class="nb">source </span>content managementâ€¦   0                                       
arm64v8/haxe                           Haxe is a modern, high level, static typed pâ€¦   0                                       
troyfontaine/arm64v8_min-alpinelinux   Minimal 64-bit ARM64v8 Alpine Linux Image       0                                       
arm64v8/hylang                         Hy is a Lisp dialect that translates expressâ€¦   0                                       
arm64v8/perl                           Perl is a high-level, general-purpose, interâ€¦   0                             
</code></pre></div></div>
<p>ä½ ä¼šå‘ç°ï¼Œæ¯”èµ·æ¥ä¸°é¥¶çš„x86ç¤¾åŒºï¼ŒarmæœåŠ¡å™¨çš„èµ„æºå®åœ¨æ˜¯å°‘çš„å¯æ€œï¼Œè€Œä¸”å¤§å¤šæ˜¯åŸºç¡€æ€§çš„æ˜ åƒã€‚<br />
è¿™ææ€•æ˜¯æ²¡æœ‰åŠæ³•çš„äº‹æƒ…äº†ï¼Œç”¨æˆ·å°‘ï¼Œèµ„æºä¹Ÿå°±å°‘ã€‚å¥½åœ¨ï¼Œæœ‰äº†åŸºç¡€æ˜ åƒï¼Œè‡ªå·±æ·»åŠ åº”ç”¨ï¼Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆä¸èƒ½æ¥å—ã€‚æƒ³ä¸€æƒ³ï¼Œå“ªä¸€ä¸ªå…³é”®åº”ç”¨ä½ æ•¢ç›´æ¥å®Œæ•´ä½¿ç”¨ç¤¾åŒºæ˜ åƒï¼Ÿ<br />
åŒæ ·å› ä¸ºDocker Hubåœ¨æ¶æ„åŒºåˆ†ä¸Šå‡†å¤‡ä¸è¶³çš„é—®é¢˜ï¼Œç°åœ¨ä½¿ç”¨<code class="language-plaintext highlighter-rouge">docker search</code>å‘½ä»¤ç›´æ¥æœç´¢æ˜ åƒå·²ç»å¾ˆä¸æ–¹ä¾¿äº†ã€‚å› ä¸ºé™¤äº†æ˜ åƒçš„å…³é”®å­—ï¼Œæˆ‘ä»¬åˆå¤šäº†ä¸€ä¸ªæ¶æ„çš„é™å®šã€‚<br />
æ‰€ä»¥å»ºè®®ç›´æ¥åˆ°å¯¹åº”ç½‘é¡µæœç´¢ï¼š<br />
<a href="https://hub.docker.com/u/aarch64">https://hub.docker.com/u/aarch64</a>è¿˜æœ‰  <a href="https://hub.docker.com/u/arm64v8">https://hub.docker.com/u/arm64v8</a></p>

<p>ä¸‹é¢æˆ‘ä»¬è¯•éªŒç”¨arm64v8åˆ†ç±»çš„Dockeræ˜ åƒï¼Œæ‰§è¡Œä¸€ä¸ªå¸¸è§çš„WordPressåº”ç”¨ï¼Œæ¥ä½“éªŒä¸€ä¸‹é²²é¹æœåŠ¡å™¨åœ¨å®¹å™¨æ–¹é¢çš„è¡¨ç°ã€‚<br />
WordPressåº”ç”¨éœ€è¦ä¸¤ä¸ªå®¹å™¨ï¼Œä¸€ä¸ªéƒ¨ç½²äº†Apache/PHPå’ŒWordPressæœ¬èº«ï¼›å¦å¤–è¿˜éœ€è¦ä¸€ä¸ªMySQLå…¼å®¹çš„æ•°æ®åº“ï¼Œæˆ‘ä»¬ä½¿ç”¨å…¶ç¤¾åŒºå¼€æºç‰ˆæœ¬MariaDBã€‚<br />
é¦–å…ˆæŠŠæ˜ åƒæ‹‰ä¸‹æ¥ï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># docker pull arm64v8/wordpress</span>
Using default tag: latest
latest: Pulling from arm64v8/wordpress
a4f3dd4087f9: Pull <span class="nb">complete 
</span>e54f8c59bdae: Pull <span class="nb">complete 
</span>6ae19fe01dd7: Pull <span class="nb">complete 
</span>939a6e43e07c: Pull <span class="nb">complete 
</span>c7bc60aacdf3: Pull <span class="nb">complete 
</span>c1e1bedfb04e: Pull <span class="nb">complete 
</span>8332b8441264: Pull <span class="nb">complete 
</span>012fa89ca2bc: Pull <span class="nb">complete 
</span>c0dfb13372af: Pull <span class="nb">complete 
</span>3cbeabdc4805: Pull <span class="nb">complete 
</span>8e492268eedf: Pull <span class="nb">complete 
</span>db2ddafb0478: Pull <span class="nb">complete 
</span>a02565d248c3: Pull <span class="nb">complete 
</span>7e8259639516: Pull <span class="nb">complete 
</span>3efb6c94a4c9: Pull <span class="nb">complete 
</span>77f6d83e6c7a: Pull <span class="nb">complete 
</span>3601f2116010: Pull <span class="nb">complete 
</span>4ec7c7d8a180: Pull <span class="nb">complete 
</span>b834909e81a9: Pull <span class="nb">complete 
</span>72c2b2a88763: Pull <span class="nb">complete 
</span>d77d0ee96a04: Pull <span class="nb">complete 
</span>Digest: sha256:28e7d4a7b3ba0d55f151e718e84de5f186b0c65adaac2da9005a64cb6ad82de8
Status: Downloaded newer image <span class="k">for </span>arm64v8/wordpress:latest

<span class="c"># docker pull arm64v8/mariadb</span>
Using default tag: latest
latest: Pulling from arm64v8/mariadb
6531af355894: Pull <span class="nb">complete 
</span>82f7942d2fb7: Pull <span class="nb">complete 
</span>fdce94e690d5: Pull <span class="nb">complete 
</span>a96a89ada1c3: Pull <span class="nb">complete 
</span>9bcef89e3002: Pull <span class="nb">complete 
</span>06115e3e56a0: Pull <span class="nb">complete 
</span>5712e955a6d4: Pull <span class="nb">complete 
</span>afd2dc9f5e8f: Pull <span class="nb">complete 
</span>07ef8ef990de: Pull <span class="nb">complete 
</span>ae55899885f1: Pull <span class="nb">complete 
</span>9c16c03a30d3: Pull <span class="nb">complete 
</span>5f1431dbf111: Pull <span class="nb">complete 
</span>58fecc1c9379: Pull <span class="nb">complete 
</span>1c94839aac8b: Pull <span class="nb">complete 
</span>Digest: sha256:c67410e8deeb6e165c867131c7669155e43b532d441120df2bbf4f12a3710cd7
Status: Downloaded newer image <span class="k">for </span>arm64v8/mariadb:latest
</code></pre></div></div>
<p>éšåå…ˆæ‰§è¡Œæ•°æ®åº“æ˜ åƒï¼Œæ‰§è¡Œçš„æ—¶å€™åœ¨ç¯å¢ƒå‚æ•°è®¾å®šrootè´¦å·å¯†ç ã€æ–°å»ºæ™®é€šç”¨æˆ·è´¦å·ã€è¿˜æœ‰ä¸ºWordPresså•ç‹¬å»ºä¸€ä¸ªåº“ã€‚æˆ‘ä»¬ä¸ä¼šåœ¨å®¿ä¸»æœºæ“ä½œæ•°æ®åº“ï¼Œæ‰€ä»¥å°±ä¸å†æ˜ å°„ç«¯å£å‡ºæ¥äº†ï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># docker run -e MYSQL_ROOT_PASSWORD=rootpassword -e MYSQL_USER=wpuser -e MYSQL_PASSWORD=wpuserpassword -e MYSQL_DATABASE=wordpressdb --name wordpressdb -d arm64v8/mariadb</span>
51e6d43af860e00c45cce81bed1918ae3c2a5c91bdcfca18203b0486d8f2783d
</code></pre></div></div>
<p>æ¥ç€æ‰§è¡ŒWordPresså®¹å™¨ï¼Œåœ¨ç¯å¢ƒå˜é‡ä¸­æŠŠåˆšæ‰åˆ›å»ºçš„æ™®é€šæ•°æ®åº“ç”¨æˆ·è´¦å·ä¼ é€’è¿›å»ï¼ŒåŒæ—¶æŠŠWordPresså®¹å™¨è¿æ¥åˆ°åˆšæ‰çš„æ•°æ®åº“å®¹å™¨ï¼Œè¿™æ˜¯ä¸ºäº†è®©å®ƒä»¬ä¹‹é—´ç›´æ¥ä½¿ç”¨Dockerå†…éƒ¨ç½‘ç»œè¿æ¥èµ·æ¥ï¼Œä¸ç”¨é€šè¿‡å®¿ä¸»æœºä¸­è½¬ï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># docker run -e WORDPRESS_DB_USER=wpuser -e WORDPRESS_DB_PASSWORD=wpuserpassword -e WORDPRESS_DB_NAME=wordpressdb -p 8080:80 --link wordpressdb:mysql --name wordpress -d arm64v8/wordpress</span>
83cad21cf2a057273440cb919885c061b77711b4baedb64fd7bff683a1a30177
</code></pre></div></div>
<p>è¿™æ ·ï¼Œä¸€ä¸ªå¾®å‹åšå®¢å°±æ­å»ºå¥½äº†ã€‚å¼€æµè§ˆå™¨æ¥çœ‹çœ‹ï¼š<br />
<img src="https://raw.githubusercontent.com/formoon/formoon.github.io/master/attachments/201912/hw/wp-setup.png" alt="" /><br />
å…ˆè¦è¿›è¡Œä¸€äº›å¿…è¦çš„åŸºç¡€è®¾ç½®ï¼Œåªæ˜¯ç«™ç‚¹ä¿¡æ¯ç±»çš„ã€‚å› ä¸ºåˆšæ‰æ‰§è¡Œå®¹å™¨çš„æ—¶å€™å°±æŠŠæ•°æ®åº“çš„è®¾ç½®ä¼ é€’äº†è¿›å»ï¼Œæ‰€ä»¥æ•°æ®åº“è®¾ç½®çš„Webé¡µé¢æ ¹æœ¬å°±ä¸ä¼šå‡ºç°ã€‚<br />
è®¾ç½®å®Œæˆæ‰“å¼€ç½‘ç«™é¦–é¡µï¼š  <br />
<img src="https://raw.githubusercontent.com/formoon/formoon.github.io/master/attachments/201912/hw/wp-home.png" alt="" /><br />
å·¥ä½œçš„æŒºå¥½ã€‚</p>

<p>æ•´ä¸ªæ­å»ºçš„è¿‡ç¨‹ï¼Œé™¤äº†ä¸¤ä¸ªæ˜ åƒçš„åå­—å¤šäº†arm64v8å‰ç¼€ï¼Œå…¶å®ƒä»é…ç½®ã€åˆ°ä½¿ç”¨ï¼Œè·ŸX86æœåŠ¡å™¨æ²¡æœ‰ä»»ä½•ä¸åŒã€‚</p>
<h4 id="æ€»ç»“">æ€»ç»“</h4>
<p>å‡ ä¸ªä½“é‡ä¸å¤§çš„åº”ç”¨ï¼Œæ˜¾ç„¶æ— æ³•ä»£è¡¨å…¨éƒ¨ï¼Œä½†è‡ªè®¤ä¸ºæ¯”é€šå¸¸çš„æµ‹è¯•è½¯ä»¶è¡¨ç°çš„è¦æ›´ä¸°æ»¡ã€‚<br />
è¯´ä¸€è¯´è‡ªå·±çš„ä½“ä¼šï¼š</p>
<ul>
  <li>é²²é¹920è¡¨ç°äº®çœ¼ï¼Œå¾ˆæœ‰æƒŠå–œã€‚åœ¨å¸¸è§çš„äº‘ç«¯ä¼ä¸šçº§åº”ç”¨ä¸­å®Œå…¨èƒ½æ‹…å½“ä¸»åŠ›ã€‚</li>
  <li>å¸¸è§„çš„è„šæœ¬è¯­è¨€ã€è™šæœºç±»è¯­è¨€å®Œå…¨ä¸ç”¨æ‹…å¿ƒå…¼å®¹æ€§ï¼Œä¸Šæ‰‹å³ç”¨ï¼Œå¼€æœºå°±èƒ½è·‘ã€‚</li>
  <li>å¸¸è§„çš„C/C++/Rustè¿™äº›ç¼–è¯‘åˆ°äºŒè¿›åˆ¶çš„è¯­è¨€ï¼Œä¹Ÿä¸ç”¨æœ‰å‹åŠ›ï¼Œæˆ‘ç›¸ä¿¡99%çš„ä¼ä¸šçº§åº”ç”¨éƒ½èƒ½å…¼å®¹ã€‚</li>
  <li>æ¶‰åŠåˆ°æ±‡ç¼–çš„éƒ¨åˆ†ï¼Œaarch64æ±‡ç¼–æ˜¯ä¸ªéšœç¢ï¼Œæ— è®ºæ˜¯è‡ªå·±æ–°ç ”å‘è¿˜æ˜¯ç¤¾åŒºæ‰¾èµ„æºï¼Œéƒ½éœ€è¦æ…¢æ…¢ç§¯ç´¯ã€‚</li>
  <li>å®¹å™¨ç¤¾åŒºèµ„æºæ˜æ˜¾ä¸è¶³ï¼Œå¯¹ä¾èµ–ç¤¾åŒºèµ„æºçš„å°å›¢é˜Ÿç¨æœ‰æ‰“å‡»ï¼Œå¯¹ä¼ä¸šåº”ç”¨å½±å“ä¸å¤§ã€‚</li>
</ul>

<p>è¯•ç”¨å®Œæˆï¼Œæœ€åç¥TaiShanæœåŠ¡å™¨å’Œé²²é¹èŠ¯ç‰‡è¶Šæ¥è¶Šå¥½ã€‚</p>

:ET